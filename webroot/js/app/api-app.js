!function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],h=0,p=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={1:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([435,0]),n()}({10:
/*!****************************************************!*\
  !*** ./src/react-extension/contexts/AppContext.js ***!
  \****************************************************/
/*! exports provided: withAppContext, default */
/*! exports used: default, withAppContext */function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a=n(/*! @babel/runtime/helpers/extends */13),r=n.n(a),s=n(/*! @babel/runtime/helpers/classCallCheck */3),i=n.n(s),o=n(/*! @babel/runtime/helpers/createClass */5),l=n.n(o),c=n(/*! @babel/runtime/helpers/inherits */7),u=n.n(c),h=n(/*! @babel/runtime/helpers/possibleConstructorReturn */8),p=n.n(h),d=n(/*! @babel/runtime/helpers/getPrototypeOf */2),m=n.n(d),f=n(/*! react */0),g=n.n(f);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var v=g.a.createContext({user:null,users:null,roles:null,rememberMeOptions:{},resources:null,resource:null,shareResources:null,selectedResources:null,selectedUser:null,folders:null,resourceCommentId:null,mustRefreshComments:!1,siteSettings:null,userSettings:null});function b(e){return function(t){u()(a,t);var n=y(a);function a(){return i()(this,a),n.apply(this,arguments)}return l()(a,[{key:"render",value:function(){var t=this;return g.a.createElement(v.Consumer,null,(function(n){return g.a.createElement(e,r()({context:n},t.props))}))}}]),a}(g.a.Component)}t.a=v},11:
/*!***************************************************!*\
  !*** ./src/react/components/Common/Icons/Icon.js ***!
  \***************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! @babel/runtime/helpers/classCallCheck */3),r=n.n(a),s=n(/*! @babel/runtime/helpers/createClass */5),i=n.n(s),o=n(/*! @babel/runtime/helpers/inherits */7),l=n.n(o),c=n(/*! @babel/runtime/helpers/possibleConstructorReturn */8),u=n.n(c),h=n(/*! @babel/runtime/helpers/getPrototypeOf */2),p=n.n(h),d=n(/*! react */0),m=n.n(d),f=n(/*! prop-types */4),g=n.n(f);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var v=function(e){l()(n,e);var t=y(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"getClassName",value:function(){var e="svg-icon ".concat(this.props.name);return this.props.big&&(e+=" icon-only"),this.props.baseline&&(e+=" baseline"),e}},{key:"render",value:function(){return m.a.createElement("span",{className:this.getClassName(),onClick:this.props.onClick},"ban"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1440 893q0-161-87-295l-754 753q137 89 297 89 111 0 211.5-43.5t173.5-116.5 116-174.5 43-212.5zm-999 299l755-754q-135-91-300-91-148 0-273 73t-198 199-73 274q0 162 89 299zm1223-299q0 157-61 300t-163.5 246-245 164-298.5 61-298.5-61-245-164-163.5-246-61-300 61-299.5 163.5-245.5 245-164 298.5-61 298.5 61 245 164 163.5 245.5 61 299.5z"})),"camera"===this.props.name&&m.a.createElement("svg",{width:"2048",height:"1792",viewBox:"0 0 2048 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1024 672q119 0 203.5 84.5t84.5 203.5-84.5 203.5-203.5 84.5-203.5-84.5-84.5-203.5 84.5-203.5 203.5-84.5zm704-416q106 0 181 75t75 181v896q0 106-75 181t-181 75h-1408q-106 0-181-75t-75-181v-896q0-106 75-181t181-75h224l51-136q19-49 69.5-84.5t103.5-35.5h512q53 0 103.5 35.5t69.5 84.5l51 136h224zm-704 1152q185 0 316.5-131.5t131.5-316.5-131.5-316.5-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5z"})),"caret-right"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1152 896q0 26-19 45l-448 448q-19 19-45 19t-45-19-19-45v-896q0-26 19-45t45-19 45 19l448 448q19 19 19 45z"})),"caret-down"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1408 704q0 26-19 45l-448 448q-19 19-45 19t-45-19l-448-448q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45z"})),"caret-up"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1408 1216q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z"})),"chevron-left"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1427 301l-531 531 531 531q19 19 19 45t-19 45l-166 166q-19 19-45 19t-45-19l-742-742q-19-19-19-45t19-45l742-742q19-19 45-19t45 19l166 166q19 19 19 45t-19 45z"})),"chevron-right"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"})),"close"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"})),"close-circle"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1277 1122q0-26-19-45l-181-181 181-181q19-19 19-45 0-27-19-46l-90-90q-19-19-46-19-26 0-45 19l-181 181-181-181q-19-19-45-19-27 0-46 19l-90 90q-19 19-19 46 0 26 19 45l181 181-181 181q-19 19-19 45 0 27 19 46l90 90q19 19 46 19 26 0 45-19l181-181 181 181q19 19 45 19 27 0 46-19l90-90q19-19 19-46zm387-226q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})),"copy-to-clipboard"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M768 1664h896v-640h-416q-40 0-68-28t-28-68v-416h-384v1152zm256-1440v-64q0-13-9.5-22.5t-22.5-9.5h-704q-13 0-22.5 9.5t-9.5 22.5v64q0 13 9.5 22.5t22.5 9.5h704q13 0 22.5-9.5t9.5-22.5zm256 672h299l-299-299v299zm512 128v672q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-160h-544q-40 0-68-28t-28-68v-1344q0-40 28-68t68-28h1088q40 0 68 28t28 68v328q21 13 36 28l408 408q28 28 48 76t20 88z"})),"download"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1344 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h465l135 136q58 56 136 56t136-56l136-136h464q40 0 68 28t28 68zm-325-569q17 41-14 70l-448 448q-18 19-45 19t-45-19l-448-448q-31-29-14-70 17-39 59-39h256v-448q0-26 19-45t45-19h256q26 0 45 19t19 45v448h256q42 0 59 39z"})),"edit"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M888 1184l116-116-152-152-116 116v56h96v96h56zm440-720q-16-16-33 1l-350 350q-17 17-1 33t33-1l350-350q17-17 1-33zm80 594v190q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-14 14-32 8-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-126q0-13 9-22l64-64q15-15 35-7t20 29zm-96-738l288 288-672 672h-288v-288zm444 132l-92 92-288-288 92-92q28-28 68-28t68 28l152 152q28 28 28 68t-28 68z"})),"eye-open"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1664 960q-152-236-381-353 61 104 61 225 0 185-131.5 316.5t-316.5 131.5-316.5-131.5-131.5-316.5q0-121 61-225-229 117-381 353 133 205 333.5 326.5t434.5 121.5 434.5-121.5 333.5-326.5zm-720-384q0-20-14-34t-34-14q-125 0-214.5 89.5t-89.5 214.5q0 20 14 34t34 14 34-14 14-34q0-86 61-147t147-61q20 0 34-14t14-34zm848 384q0 34-20 69-140 230-376.5 368.5t-499.5 138.5-499.5-139-376.5-368q-20-35-20-69t20-69q140-229 376.5-368t499.5-139 499.5 139 376.5 368q20 35 20 69z"})),"eye-close"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M555 1335l78-141q-87-63-136-159t-49-203q0-121 61-225-229 117-381 353 167 258 427 375zm389-759q0-20-14-34t-34-14q-125 0-214.5 89.5t-89.5 214.5q0 20 14 34t34 14 34-14 14-34q0-86 61-147t147-61q20 0 34-14t14-34zm363-191q0 7-1 9-106 189-316 567t-315 566l-49 89q-10 16-28 16-12 0-134-70-16-10-16-28 0-12 44-87-143-65-263.5-173t-208.5-245q-20-31-20-69t20-69q153-235 380-371t496-136q89 0 180 17l54-97q10-16 28-16 5 0 18 6t31 15.5 33 18.5 31.5 18.5 19.5 11.5q16 10 16 27zm37 447q0 139-79 253.5t-209 164.5l280-502q8 45 8 84zm448 128q0 35-20 69-39 64-109 145-150 172-347.5 267t-419.5 95l74-132q212-18 392.5-137t301.5-307q-115-179-282-294l63-112q95 64 182.5 153t144.5 184q20 34 20 69z"})),"external-link"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1408 928v-480q0-26-19-45t-45-19h-480q-42 0-59 39-17 41 14 70l144 144-534 534q-19 19-19 45t19 45l102 102q19 19 45 19t45-19l534-534 144 144q18 19 45 19 12 0 25-5 39-17 39-59zm256-512v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"})),"folder"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1728 608v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"})),"folder-shared"===this.props.name&&m.a.createElement("svg",{viewBox:"2 2 20 20",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z"})),"heart"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M896 1664q-26 0-44-18l-624-602q-10-8-27.5-26t-55.5-65.5-68-97.5-53.5-121-23.5-138q0-220 127-344t351-124q62 0 126.5 21.5t120 58 95.5 68.5 76 68q36-36 76-68t95.5-68.5 120-58 126.5-21.5q224 0 351 124t127 344q0 221-229 450l-623 600q-18 18-44 18z"})),"heart-o"===this.props.name&&m.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},m.a.createElement("path",{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"})),"heartbeat"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1280 1024h305q-5 6-10 10.5t-9 7.5l-3 4-623 600q-18 18-44 18t-44-18l-624-602q-5-2-21-20h369q22 0 39.5-13.5t22.5-34.5l70-281 190 667q6 20 23 33t39 13q21 0 38-13t23-33l146-485 56 112q18 35 57 35zm512-428q0 145-103 300h-369l-111-221q-8-17-25.5-27t-36.5-8q-45 5-56 46l-129 430-196-686q-6-20-23.5-33t-39.5-13-39 13.5-22 34.5l-116 464h-423q-103-155-103-300 0-220 127-344t351-124q62 0 126.5 21.5t120 58 95.5 68.5 76 68q36-36 76-68t95.5-68.5 120-58 126.5-21.5q224 0 351 124t127 344z"})),"info-circle"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1152 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})),"key"===this.props.name&&m.a.createElement("svg",{width:"512",height:"512",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},m.a.createElement("path",{fill:"currentColor",d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"})),"link"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"})),"lock"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"})),"lock-open"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1376 768q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-320q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45q0-106-75-181t-181-75-181 75-75 181v320h736z"})),"magic-wand"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1254 581l293-293-107-107-293 293zm447-293q0 27-18 45l-1286 1286q-18 18-45 18t-45-18l-198-198q-18-18-18-45t18-45l1286-1286q18-18 45-18t45 18l198 198q18 18 18 45zm-1351-190l98 30-98 30-30 98-30-98-98-30 98-30 30-98zm350 162l196 60-196 60-60 196-60-196-196-60 196-60 60-196zm930 478l98 30-98 30-30 98-30-98-98-30 98-30 30-98zm-640-640l98 30-98 30-30 98-30-98-98-30 98-30 30-98z"})),"plus-circle"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1344 960v-128q0-26-19-45t-45-19h-256v-256q0-26-19-45t-45-19h-128q-26 0-45 19t-19 45v256h-256q-26 0-45 19t-19 45v128q0 26 19 45t45 19h256v256q0 26 19 45t45 19h128q26 0 45-19t19-45v-256h256q26 0 45-19t19-45zm320-64q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})),"plus-square"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"})),"filter"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"})),"life-ring"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M256 504c136.967 0 248-111.033 248-248S392.967 8 256 8 8 119.033 8 256s111.033 248 248 248zm-103.398-76.72l53.411-53.411c31.806 13.506 68.128 13.522 99.974 0l53.411 53.411c-63.217 38.319-143.579 38.319-206.796 0zM336 256c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zm91.28 103.398l-53.411-53.411c13.505-31.806 13.522-68.128 0-99.974l53.411-53.411c38.319 63.217 38.319 143.579 0 206.796zM359.397 84.72l-53.411 53.411c-31.806-13.505-68.128-13.522-99.973 0L152.602 84.72c63.217-38.319 143.579-38.319 206.795 0zM84.72 152.602l53.411 53.411c-13.506 31.806-13.522 68.128 0 99.974L84.72 359.398c-38.319-63.217-38.319-143.579 0-206.796z"})),"plug"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 384 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M320,32a32,32,0,0,0-64,0v96h64Zm48,128H16A16,16,0,0,0,0,176v32a16,16,0,0,0,16,16H32v32A160.07,160.07,0,0,0,160,412.8V512h64V412.8A160.07,160.07,0,0,0,352,256V224h16a16,16,0,0,0,16-16V176A16,16,0,0,0,368,160ZM128,32a32,32,0,0,0-64,0v96h64Z"})),"printer"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M448 1536h896v-256h-896v256zm0-640h896v-384h-160q-40 0-68-28t-28-68v-160h-640v640zm1152 64q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128 0v416q0 13-9.5 22.5t-22.5 9.5h-224v160q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-160h-224q-13 0-22.5-9.5t-9.5-22.5v-416q0-79 56.5-135.5t135.5-56.5h64v-544q0-40 28-68t68-28h672q40 0 88 20t76 48l152 152q28 28 48 76t20 88v256h64q79 0 135.5 56.5t56.5 135.5z"})),"refresh"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"})),"question-circle"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1024 1376v-192q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v192q0 14 9 23t23 9h192q14 0 23-9t9-23zm256-672q0-88-55.5-163t-138.5-116-170-41q-243 0-371 213-15 24 8 42l132 100q7 6 19 6 16 0 25-12 53-68 86-92 34-24 86-24 48 0 85.5 26t37.5 59q0 38-20 61t-68 45q-63 28-115.5 86.5t-52.5 125.5v36q0 14 9 23t23 9h192q14 0 23-9t9-23q0-19 21.5-49.5t54.5-49.5q32-18 49-28.5t46-35 44.5-48 28-60.5 12.5-81zm384 192q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})),"search"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"})),"share"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1764 11q33 24 27 64l-256 1536q-5 29-32 45-14 8-31 8-11 0-24-5l-453-185-242 295q-18 23-49 23-13 0-22-4-19-7-30.5-23.5t-11.5-36.5v-349l864-1059-1069 925-395-162q-37-14-40-55-2-40 32-59l1664-960q15-9 32-9 20 0 36 11z"})),"star"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1728 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z"})),"save"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"})),"trash"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"})),"upload"===this.props.name&&m.a.createElement("svg",{width:"2048",height:"1792",viewBox:"0 0 2048 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1344 864q0-14-9-23l-352-352q-9-9-23-9t-23 9l-351 351q-10 12-10 24 0 14 9 23t23 9h224v352q0 13 9.5 22.5t22.5 9.5h192q13 0 22.5-9.5t9.5-22.5v-352h224q13 0 22.5-9.5t9.5-22.5zm640 288q0 159-112.5 271.5t-271.5 112.5h-1088q-185 0-316.5-131.5t-131.5-316.5q0-130 70-240t188-165q-2-30-2-43 0-212 150-362t362-150q156 0 285.5 87t188.5 231q71-62 166-62 106 0 181 75t75 181q0 76-41 138 130 31 213.5 135.5t83.5 238.5z"})),"upload-a"===this.props.name&&m.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"upload",className:"svg-inline--fa fa-upload fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},m.a.createElement("path",{fill:"currentColor",d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"})),"user"===this.props.name&&m.a.createElement("svg",{width:"448",height:"512",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{fill:"currentColor",d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z",className:""})),"users"===this.props.name&&m.a.createElement("svg",{width:"640",height:"512",viewBox:"0 0 640 512",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{fill:"currentColor",d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"})),"warning"===this.props.name&&m.a.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M1024 1375v-190q0-14-9.5-23.5t-22.5-9.5h-192q-13 0-22.5 9.5t-9.5 23.5v190q0 14 9.5 23.5t22.5 9.5h192q13 0 22.5-9.5t9.5-23.5zm-2-374l18-459q0-12-10-19-13-11-24-11h-220q-11 0-24 11-10 7-10 21l17 457q0 10 10 16.5t24 6.5h185q14 0 23.5-6.5t10.5-16.5zm-14-934l768 1408q35 63-2 126-17 29-46.5 46t-63.5 17h-1536q-34 0-63.5-17t-46.5-46q-37-63-2-126l768-1408q17-31 47-49t65-18 65 18 47 49z"})))}}]),n}(d.Component);v.defaultProps={big:!1,baseline:!1,onClick:function(){}},v.propTypes={name:g.a.string,big:g.a.bool,baseline:g.a.bool,onClick:g.a.func},t.a=v},12:
/*!*****************************************************!*\
  !*** ./src/react/lib/Common/Object/getPropValue.js ***!
  \*****************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";t.a=function(e,t){return t.split(".").reduce((function(e,t){return void 0===e?e:e[t]}),e)}},14:
/*!********************************************************************!*\
  !*** ./src/react-extension/lib/apiClient/apiClient.js + 2 modules ***!
  \********************************************************************/
/*! exports provided: ApiClient */
/*! exports used: ApiClient */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/asyncToGenerator.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/classCallCheck.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/createClass.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/defineProperty.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/getPrototypeOf.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/inherits.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/slicedToArray.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/wrapNativeSuper.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/regenerator/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react-extension/lib/Error/passboltApiFetchError.js because of ./src/react-extension/contexts/ApiRecoverContext.js */function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var a=n(48),r=n.n(a),s=n(1),i=n.n(s),o=n(6),l=n.n(o),c=n(16),u=n.n(c),h=n(3),p=n.n(h),d=n(5),m=n.n(d),f=n(24),g=n(7),y=n.n(g),v=n(8),b=n.n(v),k=n(2),E=n.n(k),w=n(15),x=n.n(w);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}var S=function(e){y()(n,e);var t=C(n);function n(){var e;return p()(this,n),(e=t.call(this,"An internal error occurred. The server response could not be parsed. Please contact your administrator.")).name="PassboltBadResponseError",e}return n}(x()(Error));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}var D=function(e){y()(n,e);var t=N(n);function n(e){var a;return p()(this,n),e=e||"The service is unavailable",(a=t.call(this,e)).name="PassboltServiceUnavailableError",a}return n}(x()(Error));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */var U=function(){function e(t){if(p()(this,e),this.options=t,!this.options.getBaseUrl())throw new TypeError("ApiClient constructor error: baseUrl is required.");if(!this.options.getResourceName())throw new TypeError("ApiClient constructor error: resourceName is required.");try{var n=this.options.getBaseUrl().toString();n.endsWith("/")&&(n=n.slice(0,-1)),this.baseUrl="".concat(n,"/").concat(this.options.getResourceName()),this.baseUrl=new URL(this.baseUrl)}catch(e){throw new TypeError("ApiClient constructor error: b.")}this.apiVersion="api-version=v2"}var t,n,a,s,o,c;return m()(e,[{key:"getDefaultHeaders",value:function(){return{Accept:"application/json","content-type":"application/json"}}},{key:"buildFetchOptions",value:function(){return{credentials:"include",headers:q(q({},this.getDefaultHeaders()),this.options.getHeaders())}}},{key:"get",value:(c=l()(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertValidId(t),a=this.buildUrl("".concat(this.baseUrl,"/").concat(t),n||{}),e.abrupt("return",this.fetchAndHandleResponse("GET",a));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"delete",value:(o=l()(i.a.mark((function e(t,n,a,r){var s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertValidId(t),void 0===r&&(r=!1),s=r?this.buildUrl("".concat(this.baseUrl,"/").concat(t,"/dry-run"),a||{}):this.buildUrl("".concat(this.baseUrl,"/").concat(t),a||{}),o=null,n&&(o=this.buildBody(n)),e.abrupt("return",this.fetchAndHandleResponse("DELETE",s,o));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a){return o.apply(this,arguments)})},{key:"findAll",value:(s=l()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.buildUrl(this.baseUrl.toString(),t||{}),e.next=3,this.fetchAndHandleResponse("GET",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"create",value:(a=l()(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.buildUrl(this.baseUrl.toString(),n||{}),r=this.buildBody(t),e.abrupt("return",this.fetchAndHandleResponse("POST",a,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"update",value:(n=l()(i.a.mark((function e(t,n,a,r){var s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertValidId(t),void 0===r&&(r=!1),s=r?this.buildUrl("".concat(this.baseUrl,"/").concat(t,"/dry-run"),a||{}):this.buildUrl("".concat(this.baseUrl,"/").concat(t),a||{}),o=null,n&&(o=this.buildBody(n)),e.abrupt("return",this.fetchAndHandleResponse("PUT",s,o));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return n.apply(this,arguments)})},{key:"assertValidId",value:function(e){if(!e)throw new TypeError("ApiClient.assertValidId error: id cannot be empty");if("string"!=typeof e)throw new TypeError("ApiClient.assertValidId error: id should be a string")}},{key:"assertMethod",value:function(e){"string"!=typeof e&&new TypeError("ApiClient.assertValidMethod method should be a string.");["GET","POST","PUT","DELETE"].indexOf(e)<0&&new TypeError("ApiClient.assertValidMethod error: method ".concat(e," is not supported."))}},{key:"assertUrl",value:function(e){if(!e)throw new TypeError("ApliClient.assertUrl error: url is required.");if(!(e instanceof URL))throw new TypeError("ApliClient.assertUrl error: url should be a valid URL object.")}},{key:"assertBody",value:function(e){"string"!=typeof e&&new TypeError("ApiClient.assertBody error: body should be a string.")}},{key:"buildBody",value:function(e){return JSON.stringify(e)}},{key:"buildUrl",value:function(e,t){if("string"!=typeof e)throw new TypeError("ApiClient.buildUrl error: url should be a string.");var n=new URL("".concat(e,".json?").concat(this.apiVersion));t=t||{};for(var a=function(){var e=r()(i[s],2),t=e[0],a=e[1];if("string"!=typeof t)throw new TypeError("ApiClient.buildUrl error: urlOptions key should be a string.");if("string"==typeof a)n.searchParams.append(t,a);else{if(!Array.isArray(a))throw new TypeError("ApiClient.buildUrl error: urlOptions value should be a string or array.");a.forEach((function(e){n.searchParams.append(t,e)}))}},s=0,i=Object.entries(t);s<i.length;s++)a();return n}},{key:"fetchAndHandleResponse",value:(t=l()(i.a.mark((function e(t,n,a,r){var s,o,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertUrl(n),this.assertMethod(t),a&&this.assertBody(a),(l=q(q({},this.buildFetchOptions()),r)).method=t,a&&(l.body=a),e.prev=6,e.next=9,fetch(n.toString(),l);case 9:s=e.sent,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(6),new D(e.t0.message);case 15:return e.prev=15,e.next=18,s.json();case 18:o=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),new S;case 24:if(s.ok){e.next=27;break}throw c=o.header.message,new f.a(c,{code:s.status,body:o.body});case 27:return e.abrupt("return",o);case 28:case"end":return e.stop()}}),e,this,[[6,12],[15,21]])}))),function(e,n,a,r){return t.apply(this,arguments)})}]),e}()},24:
/*!****************************************************************!*\
  !*** ./src/react-extension/lib/Error/passboltApiFetchError.js ***!
  \****************************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! @babel/runtime/helpers/classCallCheck */3),r=n.n(a),s=n(/*! @babel/runtime/helpers/inherits */7),i=n.n(s),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */8),l=n.n(o),c=n(/*! @babel/runtime/helpers/getPrototypeOf */2),u=n.n(c),h=n(/*! @babel/runtime/helpers/wrapNativeSuper */15);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=u()(e);if(t){var r=u()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var d=function(e){i()(n,e);var t=p(n);function n(e,a){var s;return r()(this,n),(s=t.call(this,e)).name="PassboltApiFetchError",s.data=a||{},s}return n}(n.n(h)()(Error));t.a=d},31:
/*!*********************************************************!*\
  !*** ./src/react-extension/components/Footer/Footer.js ***!
  \*********************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! @babel/runtime/helpers/extends */13),r=n.n(a),s=n(/*! @babel/runtime/helpers/classCallCheck */3),i=n.n(s),o=n(/*! @babel/runtime/helpers/createClass */5),l=n.n(o),c=n(/*! @babel/runtime/helpers/inherits */7),u=n.n(c),h=n(/*! @babel/runtime/helpers/possibleConstructorReturn */8),p=n.n(h),d=n(/*! @babel/runtime/helpers/getPrototypeOf */2),m=n.n(d),f=n(/*! react */0),g=n.n(f),y=n(/*! ../../../react/components/Common/Icons/Icon */11),v=n(/*! prop-types */4),b=n.n(v);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var E=function(e){u()(n,e);var t=k(n);function n(){return i()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return g.a.createElement("footer",null,g.a.createElement("div",{className:"footer"},this.isReady&&g.a.createElement("ul",{className:"footer-links"},this.isUnsafeMode&&g.a.createElement("li",{className:"error message"},g.a.createElement("a",{title:"terms of service",href:this.unsafeUrl,target:"_blank",rel:"noopener noreferrer"},"Unsafe mode")),this.termsUrl&&g.a.createElement("li",null,g.a.createElement("a",{href:this.termsUrl,target:"_blank",rel:"noopener noreferrer"},"Terms")),this.privacyUrl&&g.a.createElement("li",null,g.a.createElement("a",{href:this.privacyUrl,target:"_blank",rel:"noopener noreferrer"},"Privacy")),g.a.createElement("li",null,g.a.createElement("a",{href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},"Credits")),g.a.createElement("li",null,g.a.createElement("a",r()({href:this.creditsUrl,className:"tooltip-left"},this.versions&&{"data-tooltip":this.versions},{target:"_blank",rel:"noopener noreferrer"}),g.a.createElement(y.a,{name:"heart-o"}))))))}},{key:"isReady",get:function(){return this.props.siteSettings}},{key:"privacyUrl",get:function(){return this.props.siteSettings.privacyLink}},{key:"creditsUrl",get:function(){return"https://www.passbolt.com/credits"}},{key:"unsafeUrl",get:function(){return"https://help.passbolt.com/faq/hosting/why-unsafe"}},{key:"termsUrl",get:function(){return this.props.siteSettings.termsLink}},{key:"versions",get:function(){var e=[],t=this.props.siteSettings.version;return t&&e.push(t),this.props.extensionVersion&&e.push(this.props.extensionVersion),e.join(" / ")}},{key:"isUnsafeMode",get:function(){var e=this.props.siteSettings.debug,t=this.props.siteSettings.url.startsWith("http://");return e||t}}]),n}(f.Component);E.propTypes={siteSettings:b.a.object,extensionVersion:b.a.string},t.a=E},32:
/*!***************************************************************************!*\
  !*** ./src/react-extension/lib/apiClient/apiClientOptions.js + 1 modules ***!
  \***************************************************************************/
/*! exports provided: ApiClientOptions */
/*! exports used: ApiClientOptions */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/classCallCheck.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/createClass.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(3),r=n.n(a),s=n(5),i=n.n(s),o=function(){function e(t){r()(this,e),this.setToken(t)}return i()(e,[{key:"setToken",value:function(e){this.validate(e),this.token=e}},{key:"validate",value:function(e){if(!e)throw new TypeError("CSRF token cannot be empty.");if("string"!=typeof e)throw new TypeError("CSRF token should be a string.")}},{key:"toFetchHeaders",value:function(){return{"X-CSRF-Token":this.token}}}]),e}(),l=function(){function e(){r()(this,e)}return i()(e,[{key:"setBaseUrl",value:function(e){if(!e)throw new TypeError("ApiClientOption baseUrl is required.");if("string"==typeof e)try{this.baseUrl=new URL(e)}catch(e){throw new TypeError("ApiClientOption baseUrl is invalid.")}else{if(!(e instanceof URL))throw new TypeError("ApiClientOptions baseurl should be a string or URL");this.baseUrl=e}return this}},{key:"setCsrfToken",value:function(e){if(!e)throw new TypeError("ApiClientOption csrfToken is required.");if("string"==typeof e)this.csrfToken=new o(e);else{if(!(e instanceof o))throw new TypeError("ApiClientOption csrfToken should be a string or a valid CsrfToken.");this.csrfToken=e}return this}},{key:"setResourceName",value:function(e){if(!e)throw new TypeError("ApiClientOptions.setResourceName resourceName is required.");if("string"!=typeof e)throw new TypeError("ApiClientOptions.setResourceName resourceName should be a valid string.");return this.resourceName=e,this}},{key:"getBaseUrl",value:function(){return this.baseUrl}},{key:"getResourceName",value:function(){return this.resourceName}},{key:"getHeaders",value:function(){if(this.csrfToken)return this.csrfToken.toFetchHeaders()}}]),e}()},33:
/*!**********************************************************************!*\
  !*** ./src/react-extension/lib/Settings/SiteSettings.js + 1 modules ***!
  \**********************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/classCallCheck.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/createClass.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/typeof.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react/lib/Common/Object/getPropValue.js because of ./src/react-extension/contexts/ApiRecoverContext.js */function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(44),r=n.n(a),s=n(3),i=n.n(s),o=n(5),l=n.n(o),c=n(12),u=function(e,t){if(void 0===e||"string"!=typeof e||!e.length)return!1;t&&Array.isArray(t)||(t=["http:","https:"]);try{var n=new URL(e);return!["javascript:"].includes(n.protocol)&&(!!t.includes(n.protocol)&&n.href)}catch(e){return!1}},h=function(){function e(t){i()(this,e),this.settings=t}return l()(e,[{key:"canIUse",value:function(e){var t=!1,n="passbolt.plugins.".concat(e),a=Object(c.a)(this.settings,n)||null;if(a&&"object"===r()(a)){var s=Object(c.a)(a,"enabled");void 0!==s&&!0!==s||(t=!0)}return t}},{key:"getPluginSettings",value:function(e){var t="passbolt.plugins.".concat(e);return Object(c.a)(this.settings,t)}},{key:"getRememberMeOptions",value:function(){return(this.getPluginSettings("rememberMe")||{}).options||{}}},{key:"getServerTimezone",value:function(){return Object(c.a)(this.settings,"passbolt.app.server_timezone")}},{key:"hasRememberMeUntilILogoutOption",get:function(){return void 0!==(this.getRememberMeOptions()||{})[-1]}},{key:"termsLink",get:function(){var e=Object(c.a)(this.settings,"passbolt.legal.terms.url");return!!e&&u(e)}},{key:"privacyLink",get:function(){var e=Object(c.a)(this.settings,"passbolt.legal.privacy_policy.url");return!!e&&u(e)}},{key:"registrationPublic",get:function(){return!0===Object(c.a)(this.settings,"passbolt.registration.public")}},{key:"debug",get:function(){return!0===Object(c.a)(this.settings,"app.debug")}},{key:"url",get:function(){return Object(c.a)(this.settings,"app.url")||""}},{key:"version",get:function(){return Object(c.a)(this.settings,"app.version.number")}}]),e}()},434:
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var a={"./af":130,"./af.js":130,"./ar":131,"./ar-dz":132,"./ar-dz.js":132,"./ar-kw":133,"./ar-kw.js":133,"./ar-ly":134,"./ar-ly.js":134,"./ar-ma":135,"./ar-ma.js":135,"./ar-sa":136,"./ar-sa.js":136,"./ar-tn":137,"./ar-tn.js":137,"./ar.js":131,"./az":138,"./az.js":138,"./be":139,"./be.js":139,"./bg":140,"./bg.js":140,"./bm":141,"./bm.js":141,"./bn":142,"./bn-bd":143,"./bn-bd.js":143,"./bn.js":142,"./bo":144,"./bo.js":144,"./br":145,"./br.js":145,"./bs":146,"./bs.js":146,"./ca":147,"./ca.js":147,"./cs":148,"./cs.js":148,"./cv":149,"./cv.js":149,"./cy":150,"./cy.js":150,"./da":151,"./da.js":151,"./de":152,"./de-at":153,"./de-at.js":153,"./de-ch":154,"./de-ch.js":154,"./de.js":152,"./dv":155,"./dv.js":155,"./el":156,"./el.js":156,"./en-au":157,"./en-au.js":157,"./en-ca":158,"./en-ca.js":158,"./en-gb":159,"./en-gb.js":159,"./en-ie":160,"./en-ie.js":160,"./en-il":161,"./en-il.js":161,"./en-in":162,"./en-in.js":162,"./en-nz":163,"./en-nz.js":163,"./en-sg":164,"./en-sg.js":164,"./eo":165,"./eo.js":165,"./es":166,"./es-do":167,"./es-do.js":167,"./es-mx":168,"./es-mx.js":168,"./es-us":169,"./es-us.js":169,"./es.js":166,"./et":170,"./et.js":170,"./eu":171,"./eu.js":171,"./fa":172,"./fa.js":172,"./fi":173,"./fi.js":173,"./fil":174,"./fil.js":174,"./fo":175,"./fo.js":175,"./fr":176,"./fr-ca":177,"./fr-ca.js":177,"./fr-ch":178,"./fr-ch.js":178,"./fr.js":176,"./fy":179,"./fy.js":179,"./ga":180,"./ga.js":180,"./gd":181,"./gd.js":181,"./gl":182,"./gl.js":182,"./gom-deva":183,"./gom-deva.js":183,"./gom-latn":184,"./gom-latn.js":184,"./gu":185,"./gu.js":185,"./he":186,"./he.js":186,"./hi":187,"./hi.js":187,"./hr":188,"./hr.js":188,"./hu":189,"./hu.js":189,"./hy-am":190,"./hy-am.js":190,"./id":191,"./id.js":191,"./is":192,"./is.js":192,"./it":193,"./it-ch":194,"./it-ch.js":194,"./it.js":193,"./ja":195,"./ja.js":195,"./jv":196,"./jv.js":196,"./ka":197,"./ka.js":197,"./kk":198,"./kk.js":198,"./km":199,"./km.js":199,"./kn":200,"./kn.js":200,"./ko":201,"./ko.js":201,"./ku":202,"./ku.js":202,"./ky":203,"./ky.js":203,"./lb":204,"./lb.js":204,"./lo":205,"./lo.js":205,"./lt":206,"./lt.js":206,"./lv":207,"./lv.js":207,"./me":208,"./me.js":208,"./mi":209,"./mi.js":209,"./mk":210,"./mk.js":210,"./ml":211,"./ml.js":211,"./mn":212,"./mn.js":212,"./mr":213,"./mr.js":213,"./ms":214,"./ms-my":215,"./ms-my.js":215,"./ms.js":214,"./mt":216,"./mt.js":216,"./my":217,"./my.js":217,"./nb":218,"./nb.js":218,"./ne":219,"./ne.js":219,"./nl":220,"./nl-be":221,"./nl-be.js":221,"./nl.js":220,"./nn":222,"./nn.js":222,"./oc-lnc":223,"./oc-lnc.js":223,"./pa-in":224,"./pa-in.js":224,"./pl":225,"./pl.js":225,"./pt":226,"./pt-br":227,"./pt-br.js":227,"./pt.js":226,"./ro":228,"./ro.js":228,"./ru":229,"./ru.js":229,"./sd":230,"./sd.js":230,"./se":231,"./se.js":231,"./si":232,"./si.js":232,"./sk":233,"./sk.js":233,"./sl":234,"./sl.js":234,"./sq":235,"./sq.js":235,"./sr":236,"./sr-cyrl":237,"./sr-cyrl.js":237,"./sr.js":236,"./ss":238,"./ss.js":238,"./sv":239,"./sv.js":239,"./sw":240,"./sw.js":240,"./ta":241,"./ta.js":241,"./te":242,"./te.js":242,"./tet":243,"./tet.js":243,"./tg":244,"./tg.js":244,"./th":245,"./th.js":245,"./tk":246,"./tk.js":246,"./tl-ph":247,"./tl-ph.js":247,"./tlh":248,"./tlh.js":248,"./tr":249,"./tr.js":249,"./tzl":250,"./tzl.js":250,"./tzm":251,"./tzm-latn":252,"./tzm-latn.js":252,"./tzm.js":251,"./ug-cn":253,"./ug-cn.js":253,"./uk":254,"./uk.js":254,"./ur":255,"./ur.js":255,"./uz":256,"./uz-latn":257,"./uz-latn.js":257,"./uz.js":256,"./vi":258,"./vi.js":258,"./x-pseudo":259,"./x-pseudo.js":259,"./yo":260,"./yo.js":260,"./zh-cn":261,"./zh-cn.js":261,"./zh-hk":262,"./zh-hk.js":262,"./zh-mo":263,"./zh-mo.js":263,"./zh-tw":264,"./zh-tw.js":264};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=434},435:
/*!**********************************************************!*\
  !*** ./src/react-extension/ApiApp.entry.js + 36 modules ***!
  \**********************************************************/
/*! no exports provided */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/asyncToGenerator.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/classCallCheck.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/createClass.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/defineProperty.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/extends.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/getPrototypeOf.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/inherits.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/helpers/toConsumableArray.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/@babel/runtime/regenerator/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react-extension/components/Footer/Footer.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react-extension/contexts/AppContext.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react-extension/lib/Settings/SiteSettings.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react-extension/lib/apiClient/apiClient.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react-extension/lib/apiClient/apiClientOptions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/react/components/Common/Icons/Icon.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/moment/moment.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/prop-types/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/react-dom/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/react-router-dom/esm/react-router-dom.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/react-router/esm/react-router.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/react/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/uuid/dist/esm-browser/v4.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/xregexp/lib/index.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(47),i=n.n(s),o=n(1),l=n.n(o),c=n(6),u=n.n(c),h=n(3),p=n.n(h),d=n(5),m=n.n(d),f=n(7),g=n.n(f),y=n(8),v=n.n(y),b=n(2),k=n.n(b),E=n(10),w=n(13),x=n.n(w),C=n(34),S=n.n(C),N=n(4),D=n.n(N),R=n(439);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var U=a.createContext({feedbacks:[],displaySuccess:function(){},displayError:function(){},remove:function(){}}),T=function(e){g()(i,e);var t,n,r,s=q(i);function i(e){var t;return p()(this,i),(t=s.call(this,e)).state=t.defaultState,t}return m()(i,[{key:"displaySuccess",value:(r=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({feedbacks:[].concat(S()(this.state.feedbacks),[{id:Object(R.a)(),type:"success",message:t}])});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"displayError",value:(n=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({feedbacks:[].concat(S()(this.state.feedbacks),[{id:Object(R.a)(),type:"error",message:t}])});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"remove",value:(t=u()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return t.id!==e.id},e.next=3,this.setState({feedbacks:this.state.feedbacks.filter(n)});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return a.createElement(U.Provider,{value:this.state},this.props.children)}},{key:"defaultState",get:function(){return{feedbacks:[],displaySuccess:this.displaySuccess.bind(this),displayError:this.displayError.bind(this),remove:this.remove.bind(this)}}}]),i}(a.Component);function A(e){return function(t){g()(r,t);var n=q(r);function r(){return p()(this,r),n.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var t=this;return a.createElement(U.Consumer,null,(function(n){return a.createElement(e,x()({actionFeedbackContext:n},t.props))}))}}]),r}(a.Component)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}T.displayName="ActionFeedbackContextProvider",T.propTypes={children:D.a.any};var _=r.a.createContext({dialogs:[],open:function(){},close:function(){}}),j=function(e){g()(n,e);var t=I(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.defaultState,a}return m()(n,[{key:"render",value:function(){return r.a.createElement(_.Provider,{value:this.state},this.props.children)}},{key:"defaultState",get:function(){var e,t=this;return{dialogs:[],open:function(e,n){var a=Object(R.a)();return t.setState({dialogs:[].concat(S()(t.state.dialogs),[{key:a,Dialog:e,DialogProps:n}])}),a},close:(e=u()(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({dialogs:t.state.dialogs.filter((function(e){return n!==e.key}))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}}}]),n}(r.a.Component);function z(e){return function(t){g()(a,t);var n=I(a);function a(){return p()(this,a),n.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var t=this;return r.a.createElement(_.Consumer,null,(function(n){return r.a.createElement(e,x()({dialogContext:n},t.props))}))}}]),a}(r.a.Component)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         3.0.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}j.displayName="DialogContextProvider",j.propTypes={children:D.a.any};var O=r.a.createContext({ContextualMenu:null,show:function(){},hide:function(){}}),F=function(e){g()(n,e);var t=M(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.defaultState,a}return m()(n,[{key:"render",value:function(){return r.a.createElement(O.Provider,{value:this.state},this.props.children)}},{key:"defaultState",get:function(){var e=this;return{contextualMenus:[],show:function(t,n){return e.setState({contextualMenus:[].concat(S()(e.state.contextualMenus),[{ContextualMenuComponent:t,componentProps:n}])})},hide:function(t){return e.setState({contextualMenus:e.state.contextualMenus.filter((function(e,n){return n!==t}))})}}}}]),n}(r.a.Component);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         3.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}F.displayName="ContextualMenuContextProvider",F.propTypes={children:D.a.any};var G=function(e){g()(a,e);var t,n=P(a);function a(e){var t;return p()(this,a),(t=n.call(this,e)).bindCallbacks(),t}return m()(a,[{key:"bindCallbacks",value:function(){this.close=this.close.bind(this)}},{key:"close",value:(t=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.remove(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.hasFeedbacks?a.DEFAULT_DISPLAY_TIME_IN_MS/this.length:0;return r.a.createElement(r.a.Fragment,null,this.hasFeedbacks&&r.a.createElement("div",{className:"notification-container"},r.a.createElement(B,{feedback:this.feedbackToDisplay,onClose:function(){return e.close(e.feedbackToDisplay)},displayTimeInMs:t})))}},{key:"feedbackToDisplay",get:function(){return this.props.actionFeedbackContext.feedbacks[0]}},{key:"length",get:function(){return this.props.actionFeedbackContext.feedbacks.length}},{key:"hasFeedbacks",get:function(){return this.length>0}}],[{key:"DEFAULT_DISPLAY_TIME_IN_MS",get:function(){return 5e3}},{key:"DEFAULT_WAIT_TO_CLOSE_TIME_IN_MS",get:function(){return 500}}]),a}(r.a.Component);G.propTypes={actionFeedbackContext:D.a.any};var L=A(G),B=function(e){g()(n,e);var t=P(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.defaultState,a.bindCallbacks(),a}return m()(n,[{key:"componentDidMount",value:function(){this.displayWithTimer(this.props.displayTimeInMs)}},{key:"componentDidUpdate",value:function(e){var t=e&&e.feedback.id!==this.props.feedback.id,n=e&&this.props.displayTimeInMs&&e.displayTimeInMs!==this.props.displayTimeInMs;t?(this.setState({shouldRender:!0}),this.displayWithTimer(this.props.displayTimeInMs)):n&&this.updateTimer(this.props.displayTimeInMs)}},{key:"componentWillUnmount",value:function(){this.state.timeoutId&&clearTimeout(this.state.timeoutId)}},{key:"bindCallbacks",value:function(){this.persist=this.persist.bind(this),this.displayWithTimer=this.displayWithTimer.bind(this),this.close=this.close.bind(this)}},{key:"displayWithTimer",value:function(e){this.state.timeoutId&&clearTimeout(this.state.timeoutId);var t=setTimeout(this.close,e),n=Date.now();this.setState({timeoutId:t,time:n})}},{key:"updateTimer",value:function(e){var t=e-(Date.now()-this.state.time);t>0?this.displayWithTimer(t):(clearTimeout(this.state.timeoutId),this.close())}},{key:"persist",value:function(){this.state.timeoutId&&!this.state.isPersisted&&(clearTimeout(this.state.timeoutId),this.setState({isPersisted:!0}))}},{key:"close",value:function(){this.setState({shouldRender:!1}),setTimeout(this.props.onClose,G.DEFAULT_WAIT_TO_CLOSE_TIME_IN_MS)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"notification",onMouseOver:this.persist,onMouseLeave:this.displayWithTimer,onClick:this.close},r.a.createElement("div",{className:"message animated ".concat(this.state.shouldRender?"fadeInUp":"fadeOutUp"," warning")},r.a.createElement("span",{className:"content"},r.a.createElement("strong",null,{success:"Success: ",error:"Error: "}[this.props.feedback.type]),this.props.feedback.message))))}},{key:"defaultState",get:function(){return{shouldRender:!0,isPersisted:!1,timeoutId:null}}}]),n}(r.a.Component);B.propTypes={feedback:D.a.object,onClose:D.a.func,displayTimeInMs:D.a.number};var W=n(17),K=n(18);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var V=r.a.createContext({counter:[],add:function(){},remove:function(){}});function Y(e){return function(t){g()(a,t);var n=H(a);function a(){return p()(this,a),n.apply(this,arguments)}return m()(a,[{key:"render",value:function(){var t=this;return r.a.createElement(V.Consumer,null,(function(n){return r.a.createElement(e,x()({loadingContext:n},t.props))}))}}]),a}(r.a.Component)}(function(e){g()(n,e);var t=H(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.defaultState,a}return m()(n,[{key:"render",value:function(){return r.a.createElement(V.Provider,{value:this.state},this.props.children)}},{key:"defaultState",get:function(){var e=this;return{counter:0,add:function(){e.setState({counter:e.state.counter+1})},remove:function(){e.setState({counter:Math.min(e.state.counter-1,0)})}}}}]),n}(r.a.Component)).propTypes={children:D.a.any};var $=n(14);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Z=a.createContext({selectedAdministration:null,isSaveEnabled:!1,mustSaveSettings:!1,isTestEnabled:!1,mustTestSettings:!1,isSynchronizeEnabled:!1,mustSynchronizeSettings:!1,onGetMfaRequested:function(){},onSaveMfaRequested:function(){},onGetUsersDirectoryRequested:function(){},onUpdateUsersDirectoryRequested:function(){},onDeleteUsersDirectoryRequested:function(){},onTestUsersDirectoryRequested:function(){},onGetSimulateSynchronizeUsersDirectoryRequested:function(){},onGetSynchronizeUsersDirectoryRequested:function(){},onGetUsersRequested:function(){},onGetEmailNotificationsRequested:function(){},onSaveEmailNotificationsRequested:function(){},onSaveEnabled:function(){},onMustSaveSettings:function(){},onTestEnabled:function(){},onMustTestSettings:function(){},onSynchronizeEnabled:function(){},onMustSynchronizeSettings:function(){},onResetActionsSettings:function(){}}),X=function(e){g()(q,e);var t,n,r,s,i,o,c,h,d,f,y,v,b,k,E,w,x,C,S,N,D,R=J(q);function q(e){var t;return p()(this,q),(t=R.call(this,e)).state=t.defaultState,t}return m()(q,[{key:"componentDidMount",value:function(){this.handleAdministrationMenuRouteChange()}},{key:"componentDidUpdate",value:(D=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleRouteChange(t.location);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"handleSaveEnabled",value:(N=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({isSaveEnabled:!0});case 2:case"end":return e.stop()}}),e,this)}))),function(){return N.apply(this,arguments)})},{key:"handleMustSaveSettings",value:(S=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({mustSaveSettings:!0});case 2:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"handleTestEnabled",value:(C=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({isTestEnabled:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"handleMustTestSettings",value:(x=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({mustTestSettings:!0});case 2:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"handleSynchronizeEnabled",value:(w=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({isSynchronizeEnabled:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"handleMustSynchronizeSettings",value:(E=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({mustSynchronizeSettings:!0});case 2:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"handleResetActionsSettings",value:(k=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({mustSaveSettings:!1,mustTestSettings:!1,mustSynchronizeSettings:!1});case 2:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"handleRouteChange",value:(b=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.location.key===t.key){e.next=4;break}return e.next=4,this.handleAdministrationMenuRouteChange();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"handleAdministrationMenuRouteChange",value:(v=u()(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.pathname.includes("mfa"),n=this.props.location.pathname.includes("users-directory"),a=this.props.location.pathname.includes("email-notification"),t?r=te.MFA:n?r=te.USER_DIRECTORY:a&&(r=te.EMAIL_NOTIFICATION),e.next=11,this.setState({selectedAdministration:r,isSaveEnabled:!1,mustSaveSettings:!1,isTestEnabled:!1,mustTestSettings:!1,isSynchronizeEnabled:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"onGetMfaRequested",value:(y=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("mfa/settings"),n=new $.a(t),e.abrupt("return",n.findAll());case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"onSaveMfaRequested",value:(f=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.context.getApiClientOptions().setResourceName("mfa/settings"),a=new $.a(n),e.next=4,a.create(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"onGetUsersDirectoryRequested",value:(d=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("directorysync/settings"),n=new $.a(t),e.abrupt("return",n.findAll());case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"onUpdateUsersDirectoryRequested",value:(h=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.context.getApiClientOptions().setResourceName("directorysync"),a=new $.a(n),e.abrupt("return",a.update("settings",t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"onDeleteUsersDirectoryRequested",value:(c=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("directorysync"),n=new $.a(t),e.abrupt("return",n.delete("settings"));case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"onTestUsersDirectoryRequested",value:(o=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.context.getApiClientOptions().setResourceName("directorysync/settings/test"),a=new $.a(n),e.abrupt("return",a.create(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onGetSimulateSynchronizeUsersDirectoryRequested",value:(i=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("directorysync"),n=new $.a(t),e.abrupt("return",n.get("synchronize/dry-run"));case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onGetSynchronizeUsersDirectoryRequested",value:(s=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("directorysync"),n=new $.a(t),e.abrupt("return",n.get("synchronize"));case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"onGetUsersRequested",value:(r=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("users"),n=new $.a(t),e.abrupt("return",n.findAll());case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onGetEmailNotificationsRequested",value:(n=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.context.getApiClientOptions().setResourceName("settings/emails/notifications"),n=new $.a(t),e.abrupt("return",n.findAll());case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onSaveEmailNotificationsRequested",value:(t=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.context.getApiClientOptions().setResourceName("settings/emails/notifications"),a=new $.a(n),e.next=4,a.create(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return a.createElement(Z.Provider,{value:this.state},this.props.children)}},{key:"defaultState",get:function(){return{selectedAdministration:te.NONE,isSaveEnabled:!1,mustSaveSettings:!1,isTestEnabled:!1,mustTestSettings:!1,isSynchronizeEnabled:!1,mustSynchronizeSettings:!1,onGetMfaRequested:this.onGetMfaRequested.bind(this),onSaveMfaRequested:this.onSaveMfaRequested.bind(this),onGetUsersDirectoryRequested:this.onGetUsersDirectoryRequested.bind(this),onUpdateUsersDirectoryRequested:this.onUpdateUsersDirectoryRequested.bind(this),onDeleteUsersDirectoryRequested:this.onDeleteUsersDirectoryRequested.bind(this),onTestUsersDirectoryRequested:this.onTestUsersDirectoryRequested.bind(this),onGetSimulateSynchronizeUsersDirectoryRequested:this.onGetSimulateSynchronizeUsersDirectoryRequested.bind(this),onGetSynchronizeUsersDirectoryRequested:this.onGetSynchronizeUsersDirectoryRequested.bind(this),onGetUsersRequested:this.onGetUsersRequested.bind(this),onGetEmailNotificationsRequested:this.onGetEmailNotificationsRequested.bind(this),onSaveEmailNotificationsRequested:this.onSaveEmailNotificationsRequested.bind(this),onSaveEnabled:this.handleSaveEnabled.bind(this),onMustSaveSettings:this.handleMustSaveSettings.bind(this),onTestEnabled:this.handleTestEnabled.bind(this),onMustTestSettings:this.handleMustTestSettings.bind(this),onSynchronizeEnabled:this.handleSynchronizeEnabled.bind(this),onMustSynchronizeSettings:this.handleMustSynchronizeSettings.bind(this),onResetActionsSettings:this.handleResetActionsSettings.bind(this)}}}]),q}(a.Component);X.displayName="AdministrationWorkspaceContextProvider",X.contextType=E.a,X.propTypes={context:D.a.object,children:D.a.any,location:D.a.object,match:D.a.object,history:D.a.object,loadingContext:D.a.object};var Q=Object(K.g)(Object(E.b)(Y(X)));function ee(e){return function(t){g()(r,t);var n=J(r);function r(){return p()(this,r),n.apply(this,arguments)}return m()(r,[{key:"render",value:function(){var t=this;return a.createElement(Z.Consumer,null,(function(n){return a.createElement(e,x()({administrationWorkspaceContext:n},t.props))}))}}]),r}(a.Component)}var te={NONE:"NONE",MFA:"MFA",USER_DIRECTORY:"USER-DIRECTORY",EMAIL_NOTIFICATION:"EMAIL-NOTIFICATION"};function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var ae=function(e){g()(a,e);var t,n=ne(a);function a(e){var t;return p()(this,a),(t=n.call(this,e)).bindCallback(),t}return m()(a,[{key:"bindCallback",value:function(){this.close=this.close.bind(this)}},{key:"close",value:(t=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.dialogContext.close(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.dialogContext.dialogs.map((function(t){var n=t.key,a=t.Dialog,s=t.DialogProps;return r.a.createElement(a,x()({key:n,onClose:function(){return e.close(n)}},s))})),this.props.children)}}]),a}(r.a.Component);ae.propTypes={dialogContext:D.a.any,children:D.a.any};var re=z(ae);function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         3.0.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var ie=function(e){g()(n,e);var t=se(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).createRefs(),a.bindCallback(),a}return m()(n,[{key:"bindCallback",value:function(){this.handleHide=this.handleHide.bind(this)}},{key:"createRefs",value:function(){this.elementRef=r.a.createRef()}},{key:"handleHide",value:function(e){this.props.contextualMenuContext.hide(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:this.elementRef},this.props.contextualMenuContext.contextualMenus.map((function(t,n){return r.a.createElement(t.ContextualMenuComponent,x()({key:n,hide:function(){return e.handleHide(n)}},t.componentProps))})))}}]),n}(r.a.Component);ie.propTypes={contextualMenuContext:D.a.any};var oe,le=(oe=ie,function(e){g()(n,e);var t=M(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){var e=this;return r.a.createElement(O.Consumer,null,(function(t){return r.a.createElement(oe,x()({contextualMenuContext:t},e.props))}))}}]),n}(r.a.Component));function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var ue=function(e){g()(n,e);var t=ce(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"isSelected",value:function(e){var t=!1;return"passwords"===e?t=/^\/app\/(passwords|folders)/.test(this.props.location.pathname):"users"===e?t=/^\/app\/(users|groups)/.test(this.props.location.pathname):"administration"===e&&(t=/^\/app\/administration/.test(this.props.location.pathname)),t}},{key:"handleLogoutClick",value:function(){this.context.onLogoutRequested()}},{key:"isLoggedInUserAdmin",value:function(){return this.context.loggedInUser&&"admin"===this.context.loggedInUser.role.name}},{key:"render",value:function(){return r.a.createElement("nav",null,r.a.createElement("div",{className:"primary navigation top"},r.a.createElement("ul",{className:"left"},r.a.createElement("li",{key:"password"},r.a.createElement("div",{className:"row ".concat(this.isSelected("passwords")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.b,{to:"/app/passwords",role:"button"},r.a.createElement("span",null,"passwords")))))),r.a.createElement("li",{key:"users"},r.a.createElement("div",{className:"row ".concat(this.isSelected("users")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.b,{to:"/app/users",role:"button"},r.a.createElement("span",null,"users")))))),this.isLoggedInUserAdmin()&&r.a.createElement("li",{key:"administration"},r.a.createElement("div",{className:"row ".concat(this.isSelected("administration")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.b,{to:"/app/administration",role:"button"},r.a.createElement("span",null,"administration")))))),r.a.createElement("li",{key:"help"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement("a",{href:"https://help.passbolt.com",role:"button",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",null,"help"))))))),r.a.createElement("ul",{className:"right"},r.a.createElement("li",{key:"logout"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement("a",{role:"button",onClick:this.handleLogoutClick.bind(this)},r.a.createElement("span",null,"sign out")))))))))}}]),n}(a.Component);ue.contextType=E.a,ue.propTypes={location:D.a.object};var he=Object(K.g)(ue);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var de=function(e){g()(n,e);var t=pe(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"col1"},r.a.createElement("div",{className:"logo no-img"},r.a.createElement("h1",null,r.a.createElement("span",null,"Passbolt"))))}}]),n}(a.Component);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var fe=function(e){g()(n,e);var t=me(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.getDefaultState(),a.bindCallbacks(),a}return m()(n,[{key:"getDefaultState",value:function(){return{error:!1}}},{key:"bindCallbacks",value:function(){this.handleError=this.handleError.bind(this)}},{key:"propsHasUrl",value:function(){return this.props.user&&this.props.user.profile&&this.props.user.profile.avatar&&this.props.user.profile.avatar.url&&this.props.user.profile.avatar.url.small}},{key:"propsUrlHasProtocol",value:function(){return this.props.user.profile.avatar.url.small.startsWith("https://")}},{key:"formatUrl",value:function(e){return"".concat(this.props.baseUrl,"/").concat(e)}},{key:"getDefaultAvatarUrl",value:function(){return"".concat(this.props.baseUrl,"/img/avatar/user.png")}},{key:"getAvatarSrc",value:function(){return!this.state.error&&this.propsHasUrl()?this.propsUrlHasProtocol()?this.props.user.profile.avatar.url.small:this.formatUrl(this.props.user.profile.avatar.url.small):this.getDefaultAvatarUrl()}},{key:"handleError",value:function(){console.error("Could not load avatar image url: ".concat(this.getAvatarSrc())),this.setState({error:!0})}},{key:"getAltText",value:function(){return this.props.user&&this.props.user.first_name&&this.props.user.last_name?"Avatar of user ".concat(this.props.user.first_name," ").concat(this.props.user.last_name,"."):"..."}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},!this.state.error&&r.a.createElement("img",{src:this.getAvatarSrc(),onError:this.handleError,alt:this.getAltText()}),this.state.error&&r.a.createElement("img",{src:this.getDefaultAvatarUrl(),alt:this.getAltText()}))}}]),n}(a.Component);fe.defaultProps={className:"avatar user-avatar"},fe.propTypes={baseUrl:D.a.string,user:D.a.object,className:D.a.string};var ge=fe,ye=n(11);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var be=function(e){g()(n,e);var t=ve(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.getDefaultState(),a.bindCallbacks(),a.createRefs(),a}return m()(n,[{key:"getDefaultState",value:function(){return{open:!1,loading:!0}}},{key:"bindCallbacks",value:function(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleToggleMenuClick=this.handleToggleMenuClick.bind(this),this.handleMenuItemClick=this.handleMenuItemClick.bind(this),this.handleLogoutClick=this.handleLogoutClick.bind(this)}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClickEvent),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent),document.addEventListener("dragstart",this.handleDocumentDragStartEvent)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDocumentClickEvent),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent)}},{key:"createRefs",value:function(){this.userBadgeMenuRef=r.a.createRef()}},{key:"handleDocumentClickEvent",value:function(e){this.userBadgeMenuRef.current.contains(e.target)||this.handleCloseUserBadgeMenu()}},{key:"handleDocumentContextualMenuEvent",value:function(e){this.userBadgeMenuRef.current.contains(e.target)||this.handleCloseUserBadgeMenu()}},{key:"handleDocumentDragStartEvent",value:function(){this.handleCloseUserBadgeMenu()}},{key:"handleCloseUserBadgeMenu",value:function(){this.setState({open:!1})}},{key:"getUserFullName",value:function(){return this.props.user&&this.props.user.profile?"".concat(this.props.user.profile.first_name," ").concat(this.props.user.profile.last_name):"..."}},{key:"getUserUsername",value:function(){return this.props.user&&this.props.user.username?"".concat(this.props.user.username):"..."}},{key:"handleToggleMenuClick",value:function(e){e.preventDefault();var t=!this.state.open;this.setState({open:t})}},{key:"handleMenuItemClick",value:function(){this.setState({open:!1})}},{key:"handleLogoutClick",value:function(){this.props.context.onLogoutRequested()}},{key:"render",value:function(){return r.a.createElement("div",{className:"col3 profile-wrapper"},r.a.createElement("div",{className:"user profile dropdown",ref:this.userBadgeMenuRef},r.a.createElement("div",{onClick:this.handleToggleMenuClick},r.a.createElement("div",{className:"center-cell-wrapper"},r.a.createElement("div",{className:"details center-cell"},r.a.createElement("span",{className:"name"},this.getUserFullName()),r.a.createElement("span",{className:"email"},this.getUserUsername()))),r.a.createElement(ge,{user:this.props.user,className:"picture left-cell",baseUrl:this.props.baseUrl}),r.a.createElement("div",{className:"more right-cell"},r.a.createElement("a",{role:"button"},r.a.createElement(ye.a,{name:"caret-down"}),r.a.createElement("span",null,"more")))),this.state.open&&r.a.createElement("ul",{className:"dropdown-content right visible"},r.a.createElement("li",{key:"profile"},r.a.createElement("div",{className:"row"},r.a.createElement(W.b,{to:"/app/settings/profile",role:"button",tabIndex:"1",onClick:this.handleMenuItemClick},r.a.createElement("span",null,"Profile")))),r.a.createElement("li",{key:"theme"},r.a.createElement("div",{className:"row"},r.a.createElement(W.b,{to:"/app/settings/theme",role:"button",tabIndex:"2",onClick:this.handleMenuItemClick},r.a.createElement("span",null,"Theme")))),r.a.createElement("li",{key:"logout"},r.a.createElement("div",{className:"row"},r.a.createElement("a",{role:"button",tabIndex:"3",onClick:this.handleLogoutClick},r.a.createElement("span",null,"Sign out")))))))}}]),n}(a.Component);be.propTypes={context:D.a.object,baseUrl:D.a.string,user:D.a.object};var ke=Object(E.b)(be);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var we=function(e){g()(n,e);var t=Ee(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).bindCallbacks(),a}return m()(n,[{key:"bindCallbacks",value:function(){this.handleMfaClick=this.handleMfaClick.bind(this),this.handleUserDirectoryClick=this.handleUserDirectoryClick.bind(this),this.handleEmailNotificationsClick=this.handleEmailNotificationsClick.bind(this)}},{key:"handleMfaClick",value:function(){this.props.history.push({pathname:"/app/administration/mfa"})}},{key:"handleUserDirectoryClick",value:function(){this.props.history.push({pathname:"/app/administration/users-directory"})}},{key:"handleEmailNotificationsClick",value:function(){this.props.history.push({pathname:"/app/administration/email-notification"})}},{key:"isMfaSelected",value:function(){return te.MFA===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"isUserDirectorySelected",value:function(){return te.USER_DIRECTORY===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"isEmailNotificationsSelected",value:function(){return te.EMAIL_NOTIFICATION===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"render",value:function(){return r.a.createElement("div",{className:"navigation first"},r.a.createElement("ul",{id:"administration_menu",className:"clearfix menu ready"},this.isMfaEnabled&&r.a.createElement("li",{id:"mfa_menu"},r.a.createElement("div",{className:"row  ".concat(this.isMfaSelected()?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement("a",{onClick:this.handleMfaClick},r.a.createElement("span",null,"Multi Factor Authentication")))))),this.isUserDirectoryEnabled&&r.a.createElement("li",{id:"user_directory_menu"},r.a.createElement("div",{className:"row  ".concat(this.isUserDirectorySelected()?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement("a",{onClick:this.handleUserDirectoryClick},r.a.createElement("span",null,"Users Directory")))))),r.a.createElement("li",{id:"email_notification_menu"},r.a.createElement("div",{className:"row  ".concat(this.isEmailNotificationsSelected()?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement("a",{onClick:this.handleEmailNotificationsClick},r.a.createElement("span",null,"Email Notifications"))))))))}},{key:"isMfaEnabled",get:function(){var e=this.props.context.siteSettings;return e&&e.canIUse("multiFactorAuthentication")}},{key:"isUserDirectoryEnabled",get:function(){var e=this.props.context.siteSettings;return e&&e.canIUse("directorySync")}}]),n}(r.a.Component);we.contextType=E.a,we.propTypes={context:D.a.object,administrationWorkspaceContext:D.a.object,history:D.a.object};var xe=Object(K.g)(Object(E.b)(ee(we))),Ce=n(16),Se=n.n(Ce),Ne=n(35),De=n.n(Ne);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var qe=function(e){g()(E,e);var t,n,a,s,i,o,c,h,d,f,y,v,b,k=Re(E);function E(e){var t;return p()(this,E),(t=k.call(this,e)).state=t.defaultState,t.bindCallbacks(),t}return m()(E,[{key:"componentDidMount",value:(b=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.findAllMfaSettings();case 1:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"componentDidUpdate",value:(v=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleMustSave(t.administrationWorkspaceContext.mustSaveSettings);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"bindCallbacks",value:function(){this.handleInputChange=this.handleInputChange.bind(this)}},{key:"handleMustSave",value:(y=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.administrationWorkspaceContext.mustSaveSettings===t||!this.props.administrationWorkspaceContext.mustSaveSettings){e.next=5;break}return e.next=4,this.handleFormSubmit();case 4:this.props.administrationWorkspaceContext.onResetActionsSettings();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"findAllMfaSettings",value:(f=u()(l.a.mark((function e(){var t,n,a,r,s,i,o,c,u,h,p,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.administrationWorkspaceContext.onGetMfaRequested();case 2:t=e.sent,n=t.body,a=n.providers,r=a.includes("totp"),s=a.includes("yubikey"),i="",o="",s&&(i=n.yubikey.clientId,o=n.yubikey.secretKey),c=a.includes("duo"),u="",h="",p="",d="",c&&(u=n.duo.hostName,h=n.duo.integrationKey,p=n.duo.salt,d=n.duo.secretKey),this.setState({loading:!1,totpProviderToggle:r,yubikeyToggle:s,yubikeyClientIdentifier:i,yubikeySecretKey:o,duoToggle:c,duoHostname:u,duoIntegrationKey:h,duoSalt:p,duoSecretKey:d});case 17:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Se()({},a,n)),this.handleEnabledSaveButton()}},{key:"handleEnabledSaveButton",value:function(){this.props.administrationWorkspaceContext.isSaveEnabled||this.props.administrationWorkspaceContext.onSaveEnabled()}},{key:"hasAllInputDisabled",value:function(){return this.state.processing||this.state.loading}},{key:"isOtpProviderChecked",value:function(){return this.state.totpProviderToggle}},{key:"isYubikeyChecked",value:function(){return this.state.yubikeyToggle}},{key:"isDuoChecked",value:function(){return this.state.duoToggle}},{key:"validate",value:(d=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.validateYubikeyInput(),this.validateDuoInput()]);case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"validateYubikeyInput",value:(h=u()(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=null,this.isYubikeyChecked()&&((a=this.state.yubikeyClientIdentifier.trim()).length?De()("^[0-9]{1,64}$").test(a)||(t="The client identifier should be an integer."):t="A client identifier is required.",(r=this.state.yubikeySecretKey.trim()).length?De()("^[a-zA-Z0-9\\/=+]{10,128}$").test(r)||(n="This secret key is not valid."):n="A secret key is required."),e.abrupt("return",this.setState({yubikeyClientIdentifierError:t,yubikeySecretKeyError:n}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"validateDuoInput",value:(c=u()(l.a.mark((function e(){var t,n,a,r,s,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,n=null,a=null,r=null,this.isDuoChecked()&&((s=this.state.duoHostname.trim()).length?De()("^api-[a-fA-F0-9]{8,16}\\.duosecurity\\.com$").test(s)||(t="This is not a valid hostname."):t="A hostname is required.",(i=this.state.duoIntegrationKey.trim()).length?De()("^[a-zA-Z0-9]{16,32}$").test(i)||(n="This is not a valid integration key."):n="An integration key is required.",(o=this.state.duoSalt.trim()).length?De()("^.{40,128}$").test(o)||(a="The salt should be between 40 and 128 characters in length."):a="A salt is required.",(c=this.state.duoSecretKey.trim()).length?De()("^[a-zA-Z0-9]{32,128}$").test(c)||(r="This is not a valid secret key."):r="A secret key is required."),e.abrupt("return",this.setState({duoHostnameError:t,duoIntegrationKeyError:n,duoSaltError:a,duoSecretKeyError:r}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"hasValidationError",value:function(){return this.hasYubikeyError()||this.hasDuoError()}},{key:"hasYubikeyError",value:function(){return null!==this.state.yubikeyClientIdentifierError||null!==this.state.yubikeySecretKeyError}},{key:"hasDuoError",value:function(){return null!==this.state.duoHostnameError||null!==this.state.duoIntegrationKeyError||null!==this.state.duoSaltError||null!==this.state.duoSecretKeyError}},{key:"handleFormSubmit",value:(o=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.processing){e.next=20;break}return e.next=3,this.toggleProcessing();case 3:return e.next=5,this.validate();case 5:if(!this.hasValidationError()){e.next=9;break}return e.next=8,this.toggleProcessing();case 8:return e.abrupt("return");case 9:return e.prev=9,e.next=12,this.saveMfa();case 12:return e.next=14,this.handleSaveSuccess();case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(9),e.next=20,this.handleSaveError(e.t0);case 20:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(){return o.apply(this,arguments)})},{key:"saveMfa",value:(i=u()(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.state.totpProviderToggle&&t.push("totp"),n=null,this.state.yubikeyToggle&&(t.push("yubikey"),n={clientId:this.state.yubikeyClientIdentifier,secretKey:this.state.yubikeySecretKey}),a=null,this.state.duoToggle&&(t.push("duo"),a={hostName:this.state.duoHostname,integrationKey:this.state.duoIntegrationKey,salt:this.state.duoSalt,secretKey:this.state.duoSecretKey}),e.next=8,this.props.administrationWorkspaceContext.onSaveMfaRequested({providers:t,yubikey:n,duo:a});case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"handleSaveSuccess",value:(s=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.displaySuccess("The multi factor authentication settings for the organization were updated.");case 2:this.setState({processing:!1});case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"handleSaveError",value:(a=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UserAbortsOperationError"!==t.name){e.next=4;break}this.setState({processing:!1}),e.next=8;break;case 4:return console.error(t),e.next=7,this.handleError(t);case 7:this.setState({processing:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleError",value:(n=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.displayError(t.message);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"toggleProcessing",value:(t=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.processing,e.abrupt("return",this.setState({processing:!t}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mfa-settings col8"},r.a.createElement("form",{className:"form ready"},r.a.createElement("div",{className:"provider-section totp"},r.a.createElement("h3",null,r.a.createElement("span",{className:"input toggle-switch form-element ready"},r.a.createElement("input",{id:"totp-provider-toggle-button",type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"totpProviderToggle",onChange:this.handleInputChange,checked:this.state.totpProviderToggle,disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"totp-provider-toggle-button"})),r.a.createElement("label",null,"Time-based One Time Password")),!this.isOtpProviderChecked()&&r.a.createElement("p",{className:"description"},"The Time-based One Time Password provider is disabled for all users."),this.isOtpProviderChecked()&&r.a.createElement("p",{className:"description"},"The Time-based One Time Password provider is enabled for all users. They can setup this provider in their profile and use it as second factor authentication.")),r.a.createElement("div",{className:"provider-section yubikey"},r.a.createElement("h3",null,r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("input",{id:"yubikey-provider-toggle-button",type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"yubikeyToggle",onChange:this.handleInputChange,checked:this.state.yubikeyToggle,disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"yubikey-provider-toggle-button"})),r.a.createElement("label",null,"Yubikey")),!this.isYubikeyChecked()&&r.a.createElement("p",{className:"description"},"The Yubikey provider is disabled for all users."),this.isYubikeyChecked()&&r.a.createElement("div",null,r.a.createElement("p",{className:"description"},"The Yubikey provider is enabled for all users. They can setup this provider in their profile and use it as second factor authentication."),r.a.createElement("div",{className:"form-content"},r.a.createElement("div",{className:"input text required"},r.a.createElement("label",null,"Client identifier"),r.a.createElement("input",{id:"yubikeyClientIdentifier",type:"text",name:"yubikeyClientIdentifier",required:"required",className:"required fluid form-element ready",placeholder:"123456789",onChange:this.handleInputChange,value:this.state.yubikeyClientIdentifier,disabled:this.hasAllInputDisabled()}),this.state.yubikeyClientIdentifierError&&r.a.createElement("div",{className:"yubikey_client_identifier message error"},this.state.yubikeyClientIdentifierError)),r.a.createElement("div",{className:"input text required"},r.a.createElement("label",null,"Secret key"),r.a.createElement("input",{id:"yubikeySecretKey",name:"yubikeySecretKey",required:"required",className:"required fluid form-element",placeholder:"**********",type:"password",onChange:this.handleInputChange,value:this.state.yubikeySecretKey,disabled:this.hasAllInputDisabled()}),this.state.yubikeySecretKeyError&&r.a.createElement("div",{className:"yubikey_secret_key message error"},this.state.yubikeySecretKeyError))))),r.a.createElement("div",{className:"provider-section duo"},r.a.createElement("h3",null,r.a.createElement("span",{className:"input toggle-switch form-element ready"},r.a.createElement("input",{id:"duo-provider-toggle-button",type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"duoToggle",onChange:this.handleInputChange,checked:this.state.duoToggle,disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"duo-provider-toggle-button"})),r.a.createElement("label",null,"Duo")),!this.isDuoChecked()&&r.a.createElement("p",{className:"description"},"The Duo provider is disabled for all users."),this.isDuoChecked()&&r.a.createElement("div",null,r.a.createElement("p",{className:"description enabled"},"The Duo provider is enabled for all users. They can setup this provider in their profile and use it as second factor authentication."),r.a.createElement("div",{className:"form-content"},r.a.createElement("div",{className:"input text required"},r.a.createElement("label",null,"Hostname"),r.a.createElement("input",{id:"duoHostname",type:"text",name:"duoHostname",required:"required",className:"required fluid form-element ready",placeholder:"api-24zlkn4.duosecurity.com",value:this.state.duoHostname,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),this.state.duoHostnameError&&r.a.createElement("div",{className:"duo_hostname message error"},this.state.duoHostnameError)),r.a.createElement("div",{className:"input text required"},r.a.createElement("label",null,"Integration key"),r.a.createElement("input",{id:"duoIntegrationKey",type:"text",name:"duoIntegrationKey",required:"required",className:"required fluid form-element ready",placeholder:"HASJKDSQJO213123KQSLDF",value:this.state.duoIntegrationKey,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),this.state.duoIntegrationKeyError&&r.a.createElement("div",{className:"duo_integration_key message error"},this.state.duoIntegrationKeyError)),r.a.createElement("div",{className:"input text required"},r.a.createElement("label",null,"Salt"),r.a.createElement("input",{id:"duoSalt",name:"duoSalt",required:"required",className:"required fluid form-element ready",placeholder:"**********",type:"password",value:this.state.duoSalt,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),this.state.duoSaltError&&r.a.createElement("div",{className:"duo_salt message error"},this.state.duoSaltError)),r.a.createElement("div",{className:"input text required"},r.a.createElement("label",null,"Secret key"),r.a.createElement("input",{id:"duoSecretKey",name:"duoSecretKey",required:"required",className:"required fluid form-element ready",placeholder:"**********",type:"password",value:this.state.duoSecretKey,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),this.state.duoSecretKeyError&&r.a.createElement("div",{className:"duo_secret_key message error"},this.state.duoSecretKeyError))))))),r.a.createElement("div",{className:"col4 last"},r.a.createElement("h2",null,"Need help?"),r.a.createElement("p",null,"Check out our Multi Factor Authentication configuration guide"),r.a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ye.a,{name:"life-ring"}),r.a.createElement("span",null,"Read documentation"))))}},{key:"defaultState",get:function(){return{loading:!0,processing:!1,totpProviderToggle:!0,yubikeyToggle:!1,yubikeyClientIdentifier:"",yubikeyClientIdentifierError:null,yubikeySecretKey:"",yubikeySecretKeyError:null,duoToggle:!1,duoHostname:"",duoHostnameError:null,duoIntegrationKey:"",duoIntegrationKeyError:null,duoSalt:"",duoSaltError:null,duoSecretKey:"",duoSecretKeyError:null}}}]),E}(r.a.Component);qe.propTypes={administrationWorkspaceContext:D.a.object,actionFeedbackContext:D.a.any};var Ue=A(ee(qe));function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Ae=function(e){g()(n,e);var t=Te(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).bindCallbacks(),a}return m()(n,[{key:"bindCallbacks",value:function(){this.handleCloseClick=this.handleCloseClick.bind(this)}},{key:"handleCloseClick",value:function(){this.props.onClose()}},{key:"getClassName",value:function(){var e="dialog-close";return this.props.disabled&&(e+=" disabled"),e}},{key:"render",value:function(){return r.a.createElement("a",{className:this.getClassName(),onClick:this.handleCloseClick,role:"button"},r.a.createElement(ye.a,{name:"close"}),r.a.createElement("span",{className:"visually-hidden"},"Close"))}}]),n}(a.Component);Ae.propTypes={onClose:D.a.func,disabled:D.a.bool};var Ie=Ae;function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var je=function(e){g()(n,e);var t=_e(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state={top:null},a.tooltipRef=r.a.createRef(),a.bindCallbacks(),a}return m()(n,[{key:"bindCallbacks",value:function(){this.setTop=this.setTop.bind(this)}},{key:"getInlineCss",value:function(){return this.state.top?{top:"".concat(this.tooltipRef.current.getBoundingClientRect().top,"px")}:{}}},{key:"setTop",value:function(){this.props.offset&&this.setState({top:this.tooltipRef.current.getBoundingClientRect().top})}},{key:"render",value:function(){return r.a.createElement("div",{className:"more-details tooltip-alt",ref:this.tooltipRef,onMouseEnter:this.setTop},r.a.createElement(ye.a,{name:"info-circle"}),r.a.createElement("div",{className:"tooltip-text right",style:this.getInlineCss()},this.props.children))}}]),n}(a.Component);je.propTypes={offset:D.a.bool,children:D.a.node};var ze=je;function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Oe=function(e){g()(n,e);var t=Me(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).bindCallbacks(),a}return m()(n,[{key:"bindCallbacks",value:function(){this.handleKeyDown=this.handleKeyDown.bind(this),this.handleClose=this.handleClose.bind(this)}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.handleClose()}},{key:"handleClose",value:function(){this.props.disabled||this.props.onClose()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(this.props.className," dialog-wrapper")},r.a.createElement("div",{className:"dialog"},r.a.createElement("div",{className:"dialog-header"},r.a.createElement("h2",null,r.a.createElement("span",{className:"dialog-header-title"},this.props.title),this.props.subtitle&&r.a.createElement("span",{className:"dialog-header-subtitle"},this.props.subtitle),this.props.tooltip&&""!==this.props.tooltip&&r.a.createElement(ze,null,r.a.createElement("span",null,this.props.tooltip))),r.a.createElement(Ie,{onClose:this.handleClose,disabled:this.props.disabled})),r.a.createElement("div",{className:"dialog-content"},this.props.children)))}}]),n}(a.Component);Oe.propTypes={children:D.a.node,className:D.a.string,title:D.a.string,subtitle:D.a.string,tooltip:D.a.string,loading:D.a.bool,disabled:D.a.bool,onClose:D.a.func};var Fe=Oe;function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Ge=function(e){g()(n,e);var t=Pe(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).bindCallbacks(),a}return m()(n,[{key:"bindCallbacks",value:function(){this.handleClick=this.handleClick.bind(this)}},{key:"handleClick",value:function(){this.props.disabled||this.props.onClick()}},{key:"getClassName",value:function(){var e="cancel";return this.props.disabled&&(e+=" disabled"),e}},{key:"render",value:function(){return r.a.createElement("a",{className:this.getClassName(),role:"button",onClick:this.handleClick},"Cancel")}}]),n}(a.Component);Ge.propTypes={disabled:D.a.bool,onClick:D.a.func};var Le=Ge;function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var We=function(e){g()(n,e);var t=Be(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).bindEventHandlers(),a}return m()(n,[{key:"bindEventHandlers",value:function(){this.handleClose=this.handleClose.bind(this)}},{key:"handleClose",value:function(){this.props.onClose()}},{key:"render",value:function(){return r.a.createElement(Fe,{className:"loading-dialog",title:this.props.title,onClose:this.handleClose,disabled:!1},r.a.createElement("div",{className:"form-content"},r.a.createElement("label",null,"Take a deep breath and enjoy being in the present moment..."),r.a.createElement("div",{className:"progress-bar-wrapper"},r.a.createElement("span",{style:{width:"100%"},className:"progress-bar big infinite"},r.a.createElement("span",{className:"progress"})))))}}]),n}(a.Component);We.contextType=E.a,We.propTypes={onClose:D.a.func,title:D.a.string};var Ke=We;function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Ve=function(e){g()(s,e);var t,n,a=He(s);function s(e){var t;return p()(this,s),(t=a.call(this,e)).state=t.defaultState,t.bindEventHandlers(),t}return m()(s,[{key:"bindEventHandlers",value:function(){this.handleFullReportClicked=this.handleFullReportClicked.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSynchronize=this.handleSynchronize.bind(this)}},{key:"componentDidMount",value:(n=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.administrationWorkspaceContext.onGetSimulateSynchronizeUsersDirectoryRequested();case 3:t=e.sent,n=t.body,this.setState({loading:!1,userDirectorySimulateSynchronizeResult:n}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,this.handleError(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return n.apply(this,arguments)})},{key:"handleError",value:(t=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.error(t),e.next=3,this.props.actionFeedbackContext.displayError(t.message);case 3:this.handleClose();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleFullReportClicked",value:function(){this.setState({openFullReport:!this.state.openFullReport})}},{key:"handleClose",value:function(){this.props.onClose()}},{key:"handleSynchronize",value:function(){this.props.administrationWorkspaceContext.onMustSynchronizeSettings(),this.handleClose()}},{key:"isLoading",value:function(){return this.state.loading}},{key:"hasSuccessResource",value:function(){return this.usersSuccess.length>0||this.groupsSuccess.length>0}},{key:"hasErrorOrIgnoreResource",value:function(){return this.usersError.length>0||this.groupsError.length>0||this.usersIgnored.length>0||this.groupsIgnored.length>0}},{key:"getFullReport",value:function(){var e="";return e=(e=e.concat(this.getUsersFullReport())).concat(this.getGroupsFullReport())}},{key:"getUsersFullReport",value:function(){var e="";if(this.usersSuccess.length>0||this.usersError.length>0||this.usersIgnored.length>0){e=e.concat("---------------------------------------------------------------------\nUsers\n---------------------------------------------------------------------\n");var t=function(t){return e=e.concat("- ".concat(t.message,"\n"))};this.usersSuccess.length>0&&(e=e.concat("\nSuccess:\n"),this.usersSuccess.map(t)),this.usersError.length>0&&(e=e.concat("\nErrors:\n"),this.usersError.map(t)),this.usersIgnored.length>0&&(e=e.concat("\nIgnored:\n"),this.usersIgnored.map(t))}return e.concat("\n")}},{key:"getGroupsFullReport",value:function(){var e="";if(this.groupsSuccess.length>0||this.groupsError.length>0||this.groupsIgnored.length>0){e=e.concat("---------------------------------------------------------------------\nGroups\n---------------------------------------------------------------------\n");var t=function(t){return e=e.concat("- ".concat(t.message,"\n"))};this.groupsSuccess.length>0&&(e=e.concat("\nSuccess:\n"),this.groupsSuccess.map(t)),this.groupsError.length>0&&(e=e.concat("\nErrors:\n"),this.groupsError.map(t)),this.groupsIgnored.length>0&&(e=e.concat("\nIgnored:\n"),this.groupsIgnored.map(t))}return e}},{key:"render",value:function(){return r.a.createElement("div",null,this.isLoading()&&r.a.createElement(Ke,{onClose:this.handleClose,title:"Synchronize simulation"}),!this.isLoading()&&r.a.createElement(Fe,{className:"ldap-simulate-synchronize-dialog",title:"Synchronize simulation report",onClose:this.handleClose,disabled:this.isLoading()},r.a.createElement("div",{className:"form-content",onSubmit:this.handleFormSubmit},r.a.createElement("p",null,r.a.createElement("strong",null,"The operation was successfull.")),r.a.createElement("p",null),this.hasSuccessResource()&&r.a.createElement("p",{id:"resources-synchronize"}," ",this.usersSuccess.length," user(s) and ",this.groupsSuccess.length," group(s)  will be synchronized "),!this.hasSuccessResource()&&r.a.createElement("p",{id:"no-resources"}," No resources will be synchronized "),this.hasErrorOrIgnoreResource()&&r.a.createElement("p",{className:"error inline-error"},"Some resources will not be synchronized and will require your attention, see the full report."),r.a.createElement("div",{className:"accordion operation-details ".concat(this.state.openFullReport?"":"closed")},r.a.createElement("div",{className:"accordion-header",onClick:this.handleFullReportClicked},this.state.openListGroupsUsers&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openListGroupsUsers&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),r.a.createElement("a",{role:"link"},"Full report")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"input text"},r.a.createElement("textarea",{className:"full_report",readOnly:!0,value:this.getFullReport()})))),r.a.createElement("p",null)),r.a.createElement("div",{className:"submit-wrapper clearfix"},r.a.createElement("a",{className:"button primary ".concat(this.isLoading()?"disabled":""),role:"button",onClick:this.handleSynchronize},"Synchronize"),r.a.createElement(Le,{disabled:this.isLoading(),onClick:this.handleClose}))))}},{key:"defaultState",get:function(){return{loading:!0,openFullReport:!1,userDirectorySimulateSynchronizeResult:null}}},{key:"users",get:function(){return this.state.userDirectorySimulateSynchronizeResult.users}},{key:"groups",get:function(){return this.state.userDirectorySimulateSynchronizeResult.groups}},{key:"usersSuccess",get:function(){return this.users.filter((function(e){return"success"===e.status}))}},{key:"groupsSuccess",get:function(){return this.groups.filter((function(e){return"success"===e.status}))}},{key:"usersError",get:function(){return this.users.filter((function(e){return"error"===e.status}))}},{key:"groupsError",get:function(){return this.groups.filter((function(e){return"error"===e.status}))}},{key:"usersIgnored",get:function(){return this.users.filter((function(e){return"ignore"===e.status}))}},{key:"groupsIgnored",get:function(){return this.groups.filter((function(e){return"ignore"===e.status}))}}]),s}(a.Component);Ve.propTypes={onClose:D.a.func,actionFeedbackContext:D.a.any,administrationWorkspaceContext:D.a.object};var Ye=A(ee(Ve));function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Je=function(e){g()(s,e);var t,n,a=$e(s);function s(e){var t;return p()(this,s),(t=a.call(this,e)).state=t.defaultState,t.bindEventHandlers(),t}return m()(s,[{key:"bindEventHandlers",value:function(){this.handleFullReportClicked=this.handleFullReportClicked.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSynchronize=this.handleSynchronize.bind(this)}},{key:"componentDidMount",value:(n=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.administrationWorkspaceContext.onGetSynchronizeUsersDirectoryRequested();case 3:t=e.sent,n=t.body,this.setState({loading:!1,userDirectorySynchronizeResult:n}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,this.handleError(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return n.apply(this,arguments)})},{key:"handleError",value:(t=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.error(t),e.next=3,this.props.actionFeedbackContext.displayError(t.message);case 3:this.handleClose();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleFullReportClicked",value:function(){this.setState({openFullReport:!this.state.openFullReport})}},{key:"handleClose",value:function(){this.props.onClose()}},{key:"handleSynchronize",value:function(){this.handleClose()}},{key:"isLoading",value:function(){return this.state.loading}},{key:"hasSuccessResource",value:function(){return this.usersSuccess.length>0||this.groupsSuccess.length>0}},{key:"hasErrorOrIgnoreResource",value:function(){return this.usersError.length>0||this.groupsError.length>0||this.usersIgnored.length>0||this.groupsIgnored.length>0}},{key:"getFullReport",value:function(){var e="";return e=(e=e.concat(this.getUsersFullReport())).concat(this.getGroupsFullReport())}},{key:"getUsersFullReport",value:function(){var e="";if(this.usersSuccess.length>0||this.usersError.length>0||this.usersIgnored.length>0){e=e.concat("---------------------------------------------------------------------\nUsers\n---------------------------------------------------------------------\n");var t=function(t){return e=e.concat("- ".concat(t.message,"\n"))};this.usersSuccess.length>0&&(e=e.concat("\nSuccess:\n"),this.usersSuccess.map(t)),this.usersError.length>0&&(e=e.concat("\nErrors:\n"),this.usersError.map(t)),this.usersIgnored.length>0&&(e=e.concat("\nIgnored:\n"),this.usersIgnored.map(t))}return e.concat("\n")}},{key:"getGroupsFullReport",value:function(){var e="";if(this.groupsSuccess.length>0||this.groupsError.length>0||this.groupsIgnored.length>0){e=e.concat("---------------------------------------------------------------------\nGroups\n---------------------------------------------------------------------\n");var t=function(t){return e=e.concat("- ".concat(t.message,"\n"))};this.groupsSuccess.length>0&&(e=e.concat("\nSuccess:\n"),this.groupsSuccess.map(t)),this.groupsError.length>0&&(e=e.concat("\nErrors:\n"),this.groupsError.map(t)),this.groupsIgnored.length>0&&(e=e.concat("\nIgnored:\n"),this.groupsIgnored.map(t))}return e}},{key:"render",value:function(){return r.a.createElement("div",null,this.isLoading()&&r.a.createElement(Ke,{onClose:this.handleClose,title:"Synchronize"}),!this.isLoading()&&r.a.createElement(Fe,{className:"ldap-simulate-synchronize-dialog",title:"Synchronize report",onClose:this.handleClose,disabled:this.isLoading()},r.a.createElement("div",{className:"form-content",onSubmit:this.handleFormSubmit},r.a.createElement("p",null,r.a.createElement("strong",null,"The operation was successfull.")),r.a.createElement("p",null),this.hasSuccessResource()&&r.a.createElement("p",{id:"resources-synchronize"}," ",this.usersSuccess.length," user(s) and ",this.groupsSuccess.length," group(s)  will be synchronized "),!this.hasSuccessResource()&&r.a.createElement("p",{id:"no-resources"}," No resources will be synchronized "),this.hasErrorOrIgnoreResource()&&r.a.createElement("p",{className:"error inline-error"},"Some resources will not be synchronized and will require your attention, see the full report."),r.a.createElement("div",{className:"accordion operation-details ".concat(this.state.openFullReport?"":"closed")},r.a.createElement("div",{className:"accordion-header",onClick:this.handleFullReportClicked},this.state.openListGroupsUsers&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openListGroupsUsers&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),r.a.createElement("a",{role:"link"},"Full report")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"input text"},r.a.createElement("textarea",{className:"full_report",readOnly:!0,value:this.getFullReport()})))),r.a.createElement("p",null)),r.a.createElement("div",{className:"submit-wrapper clearfix"},r.a.createElement("a",{className:"button primary ".concat(this.isLoading()?"disabled":""),role:"button",onClick:this.handleClose},"OK"))))}},{key:"defaultState",get:function(){return{loading:!0,openFullReport:!1,userDirectorySynchronizeResult:null}}},{key:"users",get:function(){return this.state.userDirectorySynchronizeResult.users}},{key:"groups",get:function(){return this.state.userDirectorySynchronizeResult.groups}},{key:"usersSuccess",get:function(){return this.users.filter((function(e){return"success"===e.status}))}},{key:"groupsSuccess",get:function(){return this.groups.filter((function(e){return"success"===e.status}))}},{key:"usersError",get:function(){return this.users.filter((function(e){return"error"===e.status}))}},{key:"groupsError",get:function(){return this.groups.filter((function(e){return"error"===e.status}))}},{key:"usersIgnored",get:function(){return this.users.filter((function(e){return"ignore"===e.status}))}},{key:"groupsIgnored",get:function(){return this.groups.filter((function(e){return"ignore"===e.status}))}}]),s}(a.Component);Je.propTypes={onClose:D.a.func,actionFeedbackContext:D.a.any,administrationWorkspaceContext:D.a.object};var Ze=A(ee(Je));function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Qe=function(e){g()(a,e);var t,n=Xe(a);function a(e){var t;return p()(this,a),(t=n.call(this,e)).bindCallbacks(),t}return m()(a,[{key:"bindCallbacks",value:function(){this.handleSaveClick=this.handleSaveClick.bind(this),this.handleTestClick=this.handleTestClick.bind(this),this.handleSimulateSynchronizeClick=this.handleSimulateSynchronizeClick.bind(this),this.handleSynchronizeClick=this.handleSynchronizeClick.bind(this)}},{key:"componentDidUpdate",value:(t=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleMustSynchronize(t.administrationWorkspaceContext.mustSynchronizeSettings);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleMustSynchronize",value:function(e){this.props.administrationWorkspaceContext.mustSynchronizeSettings!==e&&this.props.administrationWorkspaceContext.mustSynchronizeSettings&&(this.handleSynchronizeClick(),this.props.administrationWorkspaceContext.onResetActionsSettings())}},{key:"handleSaveClick",value:function(){this.props.administrationWorkspaceContext.onMustSaveSettings()}},{key:"handleTestClick",value:function(){this.props.administrationWorkspaceContext.onMustTestSettings()}},{key:"handleSimulateSynchronizeClick",value:function(){this.props.dialogContext.open(Ye)}},{key:"handleSynchronizeClick",value:function(){this.props.dialogContext.open(Ze)}},{key:"isSaveEnabled",value:function(){return this.props.administrationWorkspaceContext.isSaveEnabled}},{key:"isTestEnabled",value:function(){return this.props.administrationWorkspaceContext.isTestEnabled}},{key:"isSynchronizeEnabled",value:function(){return this.props.administrationWorkspaceContext.isSynchronizeEnabled}},{key:"isUserDirectorySelected",value:function(){return te.USER_DIRECTORY===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"render",value:function(){return r.a.createElement("div",{className:"col2_3 actions-wrapper"},r.a.createElement("div",{className:"actions"},r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("a",{className:"button ".concat(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},r.a.createElement(ye.a,{name:"save"}),r.a.createElement("span",null,"save settings"))),this.isUserDirectorySelected()&&r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("a",{className:"button ".concat(this.isTestEnabled()?"":"disabled"),onClick:this.handleTestClick},r.a.createElement(ye.a,{name:"plug"}),r.a.createElement("span",null,"test settings"))),r.a.createElement("li",null,r.a.createElement("a",{className:"button ".concat(this.isSynchronizeEnabled()?"":"disabled"),onClick:this.handleSimulateSynchronizeClick},r.a.createElement(ye.a,{name:"magic-wand"}),r.a.createElement("span",null,"simulate synchronize"))),r.a.createElement("li",null,r.a.createElement("a",{className:"button ".concat(this.isSynchronizeEnabled()?"":"disabled"),onClick:this.handleSynchronizeClick},r.a.createElement(ye.a,{name:"refresh"}),r.a.createElement("span",null,"synchronize")))))))}}]),a}(r.a.Component);Qe.contextType=E.a,Qe.propTypes={administrationWorkspaceContext:D.a.object,dialogContext:D.a.any};var et=z(ee(Qe));function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var nt=function(e){g()(n,e);var t=tt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){var e=0;return r.a.createElement("div",{className:"breadcrumbs"},r.a.createElement("ul",{className:"menu"},this.props.items&&this.props.items.map((function(t){return e++,r.a.createElement("li",{className:"ellipsis",key:e},t.link&&t.name&&r.a.createElement(W.b,{to:t.link},t.name),t.url&&t.name&&r.a.createElement("a",{href:t.url},t.name),!t.url&&!t.link&&t.name&&r.a.createElement("a",{href:"#"},t.name))}))))}}]),n}(a.Component);nt.propTypes={items:D.a.array};var at=nt;function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var st=function(e){g()(n,e);var t=rt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"getBreadcrumb",value:function(){return[].concat(S()(this.allSettings),[{name:this.getBreadcrumbItemName(),link:this.props.location},{name:"Settings"}])}},{key:"getBreadcrumbItemName",value:function(){switch(this.props.administrationWorkspaceContext.selectedAdministration){case te.MFA:return"Multi factor authentication";case te.USER_DIRECTORY:return"Users Directory";case te.EMAIL_NOTIFICATION:return"Email Notification";default:return""}}},{key:"render",value:function(){return r.a.createElement(at,{items:this.items})}},{key:"allSettings",get:function(){return[{name:"Administration",link:this.props.location}]}},{key:"items",get:function(){switch(this.props.administrationWorkspaceContext.selectedAdministration){case te.NONE:return[];default:return this.getBreadcrumb()}}}]),n}(a.Component);st.context=E.a,st.propTypes={administrationWorkspaceContext:D.a.object,location:D.a.object};var it=Object(K.g)(ee(st));function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var lt=function(e){g()(n,e);var t=ot(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"hasChildren",value:function(){return this.props.node.group.groups.length>0}},{key:"displayUserName",value:function(e){return"".concat(e.profile.first_name," ").concat(e.profile.last_name)}},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{key:this.node.id},"group"===this.node.type&&r.a.createElement("li",{className:"group"},this.node.group.name,r.a.createElement("ul",null,Object.values(this.node.group.users).map((function(t){return r.a.createElement("li",{className:"user",key:t.id},t.errors&&r.a.createElement("span",{className:"error"},t.directory_name),!t.errors&&r.a.createElement("span",null,e.displayUserName(t.user)," ",r.a.createElement("em",null,"(",t.user.username,")")))})),Object.values(this.node.group.groups).map((function(e){return r.a.createElement(n,{key:"tree-".concat(e.id),node:e})})))),"user"===this.node.type&&r.a.createElement("li",{className:"user"},this.node.errors&&r.a.createElement("span",{className:"error"},this.node.directory_name),!this.node.errors&&r.a.createElement("span",null,this.displayUserName(this.node.user)," ",r.a.createElement("em",null,"(",this.node.user.username,")"))))}},{key:"node",get:function(){return this.props.node}}]),n}(r.a.Component);lt.contextType=E.a,lt.propTypes={node:D.a.object};var ct=lt;function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var ht=function(e){g()(n,e);var t=ut(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.defaultState,a.bindEventHandlers(),a}return m()(n,[{key:"bindEventHandlers",value:function(){this.handleListGroupsUsersClicked=this.handleListGroupsUsersClicked.bind(this),this.handleStructureGroupsUsersClicked=this.handleStructureGroupsUsersClicked.bind(this),this.handleErrorsClicked=this.handleErrorsClicked.bind(this),this.handleClose=this.handleClose.bind(this)}},{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"handleListGroupsUsersClicked",value:function(){this.setState({openListGroupsUsers:!this.state.openListGroupsUsers})}},{key:"handleStructureGroupsUsersClicked",value:function(){this.setState({openStructureGroupsUsers:!this.state.openStructureGroupsUsers})}},{key:"handleErrorsClicked",value:function(){this.setState({openErrors:!this.state.openErrors})}},{key:"handleClose",value:function(){this.props.onClose(),this.context.setContext({displayTestUserDirectoryDialogProps:null})}},{key:"hasAllInputDisabled",value:function(){return this.state.loading}},{key:"displayUserName",value:function(e){return"".concat(e.profile.first_name," ").concat(e.profile.last_name)}},{key:"render",value:function(){var e=this;return r.a.createElement(Fe,{className:"ldap-test-settings-dialog",title:"Test settings report",onClose:this.handleClose,disabled:this.hasAllInputDisabled()},r.a.createElement("div",{className:"form-content"},r.a.createElement("p",null,r.a.createElement("strong",null,"A connection could be established. Well done!")),r.a.createElement("p",null),r.a.createElement("div",{className:"ldap-test-settings-report"},r.a.createElement("p",null,this.users.length," user(s) and ",this.groups.length," group(s) have been found."),r.a.createElement("div",{className:"accordion directory-list ".concat(this.state.openListGroupsUsers?"":"closed")},r.a.createElement("div",{className:"accordion-header",onClick:this.handleListGroupsUsersClicked},this.state.openListGroupsUsers&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openListGroupsUsers&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),r.a.createElement("a",{role:"link"},"See list")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Groups"),r.a.createElement("td",null,"Users")),r.a.createElement("tr",null,r.a.createElement("td",null,this.groups.map((function(e){return e.errors&&r.a.createElement("div",{key:e.id},r.a.createElement("span",{className:"error"},e.directory_name))||r.a.createElement("div",{key:e.id},e.group.name)}))),r.a.createElement("td",null,this.users.map((function(t){return t.errors&&r.a.createElement("div",{key:t.id},r.a.createElement("span",{className:"error"},t.directory_name))||r.a.createElement("div",{key:t.id},e.displayUserName(t.user)," ",r.a.createElement("em",null,"(",t.user.username,")"))})))))))),r.a.createElement("div",{className:"accordion accordion-directory-structure ".concat(this.state.openStructureGroupsUsers?"":"closed")},r.a.createElement("div",{className:"accordion-header",onClick:this.handleStructureGroupsUsersClicked},this.state.openStructureGroupsUsers&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openStructureGroupsUsers&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),r.a.createElement("a",{role:"link"},"See structure")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"directory-structure"},r.a.createElement("ul",null,r.a.createElement("li",{className:"group"},"Root",Object.values(this.tree).map((function(e){return r.a.createElement(ct,{key:"tree-".concat(e.id),node:e})}))))))),this.errors.length>0&&r.a.createElement("div",null,r.a.createElement("p",{className:"directory-errors error"},this.errors.length," entries had errors and will be ignored during synchronization."),r.a.createElement("div",{className:"accordion accordion-directory-errors ".concat(this.state.openErrors?"":"closed")},r.a.createElement("div",{className:"accordion-header",onClick:this.handleErrorsClicked},this.state.openErrors&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openErrors&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),r.a.createElement("a",{role:"link"},"See error details")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"directory-errors"},r.a.createElement("textarea",{value:JSON.stringify(this.errors,null," "),readOnly:!0}))))))),r.a.createElement("div",{className:"submit-wrapper clearfix"},r.a.createElement("a",{className:"button primary ".concat(this.hasAllInputDisabled()?"disabled":""),role:"button",onClick:this.handleClose},"OK")))}},{key:"defaultState",get:function(){return{loading:!0,openListGroupsUsers:!1,openStructureGroupsUsers:!1,openErrors:!1}}},{key:"users",get:function(){return this.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.users}},{key:"groups",get:function(){return this.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.groups}},{key:"tree",get:function(){return this.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.tree}},{key:"errors",get:function(){return this.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.errors}}]),n}(a.Component);ht.contextType=E.a,ht.propTypes={onClose:D.a.func};var pt=ht;function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var mt=function(e){g()(x,e);var t,n,a,s,i,o,c,h,d,f,y,v,b,k,E,w=dt(x);function x(e){var t;return p()(this,x),(t=w.call(this,e)).state=t.defaultState,t.createRefs(),t.bindCallbacks(),t}return m()(x,[{key:"componentDidMount",value:(E=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.addEventListener("click",this.handleUserDirectoryClickEvent),this.findAllUserDirectorySettings();case 2:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleUserDirectoryClickEvent)}},{key:"componentDidUpdate",value:(k=u()(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleEnabledTestButton(n.userDirectoryToggle);case 2:return e.next=4,this.handleMustSubmit(t.administrationWorkspaceContext);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"bindCallbacks",value:function(){this.handleUserDirectoryClickEvent=this.handleUserDirectoryClickEvent.bind(this),this.handleCredentialTitleClicked=this.handleCredentialTitleClicked.bind(this),this.handleDirectoryConfigurationTitleClicked=this.handleDirectoryConfigurationTitleClicked.bind(this),this.handleSynchronizationOptionsTitleClicked=this.handleSynchronizationOptionsTitleClicked.bind(this),this.handleDefaultAdminClicked=this.handleDefaultAdminClicked.bind(this),this.handleDefaultGroupAdminClicked=this.handleDefaultGroupAdminClicked.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleHostInputKeyUp=this.handleHostInputKeyUp.bind(this),this.handlePortInputKeyUp=this.handlePortInputKeyUp.bind(this),this.handleDomainInputKeyUp=this.handleDomainInputKeyUp.bind(this),this.stopPropagation=this.stopPropagation.bind(this),this.handleUserToBeDefaultAdminClick=this.handleUserToBeDefaultAdminClick.bind(this),this.handleUserToBeDefaultGroupAdminClick=this.handleUserToBeDefaultGroupAdminClick.bind(this)}},{key:"createRefs",value:function(){this.defaultAdminRef=r.a.createRef(),this.defaultGroupAdminRef=r.a.createRef()}},{key:"handleEnabledTestButton",value:function(e){this.state.userDirectoryToggle!==e&&this.props.administrationWorkspaceContext.onTestEnabled(this.state.userDirectoryToggle)}},{key:"handleUserDirectoryClickEvent",value:function(e){null===this.defaultAdminRef.current||this.defaultAdminRef.current.contains(e.target)||this.setState({openDefaultAdmin:!1}),null===this.defaultGroupAdminRef.current||this.defaultGroupAdminRef.current.contains(e.target)||this.setState({openDefaultGroupAdmin:!1})}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"handleMustSubmit",value:(b=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.administrationWorkspaceContext.mustSaveSettings!==t.mustSaveSettings,a=this.props.administrationWorkspaceContext.mustTestSettings!==t.mustTestSettings,!(n&&this.props.administrationWorkspaceContext.mustSaveSettings||a&&this.props.administrationWorkspaceContext.mustTestSettings)){e.next=6;break}return e.next=5,this.handleFormSubmit();case 5:this.props.administrationWorkspaceContext.onResetActionsSettings();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"findAllUserDirectorySettings",value:(v=u()(l.a.mark((function e(){var t,n,a,r,s,i,o,c,u,h,p,d,m,f,g,y,v,b,k,E,w,x,C,S,N,D,R,q,U,T,A=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.administrationWorkspaceContext.onGetUsersDirectoryRequested();case 2:return t=e.sent,n=t.body,e.next=6,this.props.administrationWorkspaceContext.onGetUsersRequested();case 6:a=e.sent,r=this.sortUsers(a.body),s="",i="",0!==n.length?(o=n.directory_type,c=n.connection_type,u=n.domain_name,h=n.username,p=n.password,d=n.base_dn,m=n.server,f=n.port.toString(),s=n.default_user,i=n.default_group_admin_user,g=n.sync_users_create,y=n.sync_users_delete,v=n.sync_groups_create,b=n.sync_groups_delete,k=n.sync_groups_update,E=!0===n.enabled_users_only,w=n.group_path,x=n.user_path,C=n.group_object_class,S=n.user_object_class,N=n.use_email_prefix_suffix,D=n.email_prefix,R=n.email_suffix,q=n.groups_parent_group,U=n.users_parent_group,this.setState({loading:!1,users:r,userDirectoryToggle:!0,directoryType:o,connectionType:c,domain:u,username:h,password:p,baseDn:d,host:m,port:f,defaultAdmin:s,defaultGroupAdmin:i,enabledUsersOnly:E,groupPath:w,userPath:x,groupObjectClass:C,userObjectClass:S,useEmailPrefix:N,emailPrefix:D,emailSuffix:R,groupsParentGroup:q,usersParentGroup:U,createUsers:g,deleteUsers:y,createGroups:v,deleteGroups:b,updateGroups:k}),this.props.administrationWorkspaceContext.onTestEnabled(!0),this.props.administrationWorkspaceContext.onSynchronizeEnabled(!0)):(T=r.find((function(e){return A.props.context.loggedInUser.id===e.id})),s=T.id,i=T.id,this.setState({loading:!1,users:r,defaultAdmin:s,defaultGroupAdmin:i}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"sortUsers",value:function(e){var t=function(e){return"".concat(e.profile.first_name," ").concat(e.profile.last_name)};return e.sort((function(e,n){return t(e).localeCompare(t(n))}))}},{key:"handleCredentialTitleClicked",value:function(){this.setState({openCredentials:!this.state.openCredentials})}},{key:"handleDirectoryConfigurationTitleClicked",value:function(){this.setState({openDirectoryConfiguration:!this.state.openDirectoryConfiguration})}},{key:"handleSynchronizationOptionsTitleClicked",value:function(){this.setState({openSynchronizationOptions:!this.state.openSynchronizationOptions})}},{key:"handleDefaultAdminClicked",value:function(){this.hasAllInputDisabled()||this.setState({openDefaultAdmin:!this.state.openDefaultAdmin,defaultAdminSearch:""})}},{key:"handleDefaultGroupAdminClicked",value:function(){this.hasAllInputDisabled()||this.setState({openDefaultGroupAdmin:!this.state.openDefaultGroupAdmin,defaultGroupAdminSearch:""})}},{key:"handleHostInputKeyUp",value:function(){if(this.state.hasAlreadyBeenValidated){var e=this.validateHostInput();this.setState(e)}}},{key:"handlePortInputKeyUp",value:function(){if(this.state.hasAlreadyBeenValidated){var e=this.validatePortInput();this.setState(e)}}},{key:"handleDomainInputKeyUp",value:function(){if(this.state.hasAlreadyBeenValidated){var e=this.validateDomainInput();this.setState(e)}}},{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Se()({},a,n)),this.handleEnabledSaveButton()}},{key:"handleUserToBeDefaultAdminClick",value:function(e){var t=e.target.dataset.id;this.setState({defaultAdmin:t}),this.handleEnabledSaveButton()}},{key:"handleUserToBeDefaultGroupAdminClick",value:function(e){var t=e.target.dataset.id;this.setState({defaultGroupAdmin:t}),this.handleEnabledSaveButton()}},{key:"handleEnabledSaveButton",value:function(){this.props.administrationWorkspaceContext.isSaveEnabled||this.props.administrationWorkspaceContext.onSaveEnabled()}},{key:"hasAllInputDisabled",value:function(){return this.state.processing||this.state.loading}},{key:"isUserDirectoryChecked",value:function(){return this.state.userDirectoryToggle}},{key:"isActiveDirectoryChecked",value:function(){return"ad"===this.state.directoryType}},{key:"isOpenLdapChecked",value:function(){return"openldap"===this.state.directoryType}},{key:"isUseEmailPrefixChecked",value:function(){return this.state.useEmailPrefix}},{key:"validate",value:(y=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.validateHostInput(),this.validatePortInput(),this.validateDomainInput()]);case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"validateHostInput",value:(f=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,this.state.host.trim().length||(t="A host is required."),e.abrupt("return",this.setState({hostError:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"validatePortInput",value:(d=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,(n=this.state.port.trim()).length?De()("^[0-9]+").test(n)||(t="Only numeric characters allowed."):t="A port is required.",e.abrupt("return",this.setState({portError:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"validateDomainInput",value:(h=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,this.state.domain.trim().length||(t="A domain name is required."),e.abrupt("return",this.setState({domainError:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"hasValidationError",value:function(){return null!==this.state.hostError||null!==this.state.portError||null!==this.state.domainError}},{key:"handleFormSubmit",value:(c=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({hasAlreadyBeenValidated:!0});case 2:if(this.state.processing){e.next=29;break}return e.next=5,this.toggleProcessing();case 5:return e.next=7,this.validate();case 7:if(!this.hasValidationError()){e.next=11;break}return e.next=10,this.toggleProcessing();case 10:return e.abrupt("return");case 11:if(e.prev=11,!this.props.administrationWorkspaceContext.mustSaveSettings){e.next=19;break}return e.next=15,this.saveUserDirectory();case 15:return e.next=17,this.handleSaveSuccess();case 17:e.next=22;break;case 19:if(!this.props.administrationWorkspaceContext.mustTestSettings){e.next=22;break}return e.next=22,this.testUserDirectory();case 22:this.setState({processing:!1}),e.next=29;break;case 25:return e.prev=25,e.t0=e.catch(11),e.next=29,this.handleSaveError(e.t0);case 29:case"end":return e.stop()}}),e,this,[[11,25]])}))),function(){return c.apply(this,arguments)})},{key:"createUserDirectoryDTO",value:function(){var e=this.state.directoryType,t=this.state.domain,n=this.state.connectionType,a=this.state.host,r=parseInt(this.state.port),s=this.state.username,i=this.state.password,o=this.state.baseDn,l=this.state.groupPath,c=this.state.userPath,u=this.state.defaultAdmin,h=this.state.defaultGroupAdmin,p=this.state.groupsParentGroup,d=this.state.usersParentGroup,m=this.state.enabledUsersOnly,f=this.state.createUsers,g=this.state.deleteUsers,y=this.state.createGroups,v=this.state.deleteGroups,b=this.state.updateGroups,k=this.state.userDirectoryToggle,E=this.state.useEmailPrefix,w=null,x=null;return E&&(w=this.state.emailPrefix,x=this.state.emailSuffix),{directory_type:e,domain_name:t,connection_type:n,server:a,port:r,username:s,password:i,base_dn:o,group_path:l,user_path:c,default_user:u,default_group_admin_user:h,groups_parent_group:p,users_parent_group:d,enabled_users_only:m,sync_users_create:f,sync_users_delete:g,sync_groups_create:y,sync_groups_delete:v,sync_groups_update:b,enabled:k,use_email_prefix_suffix:E,email_prefix:w,email_suffix:x}}},{key:"saveUserDirectory",value:(o=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.userDirectoryToggle){e.next=6;break}return e.next=3,this.props.administrationWorkspaceContext.onUpdateUsersDirectoryRequested(this.createUserDirectoryDTO());case 3:this.props.administrationWorkspaceContext.onSynchronizeEnabled(!0),e.next=11;break;case 6:return this.setState(this.defaultState),e.next=9,this.props.administrationWorkspaceContext.onDeleteUsersDirectoryRequested();case 9:this.props.administrationWorkspaceContext.onSynchronizeEnabled(!1),this.setState({loading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"testUserDirectory",value:(i=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.administrationWorkspaceContext.onTestUsersDirectoryRequested(this.createUserDirectoryDTO());case 2:t=e.sent,n={userDirectoryTestResult:t.body},this.props.context.setContext({displayTestUserDirectoryDialogProps:n}),this.props.dialogContext.open(pt);case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"handleSaveSuccess",value:(s=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.displaySuccess("The user directory settings for the organization were updated.");case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"handleSaveError",value:(a=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UserAbortsOperationError"!==t.name){e.next=4;break}this.setState({processing:!1}),e.next=8;break;case 4:return console.error(t),e.next=7,this.handleError(t);case 7:this.setState({processing:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleError",value:(n=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.displayError(t.message);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"toggleProcessing",value:(t=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.processing,e.abrupt("return",this.setState({processing:!t}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getUsersAllowedToBeDefaultAdmin",value:function(){if(null!==this.state.users){var e=this.state.users.filter((function(e){return!0===e.active&&"admin"===e.role.name}));return""!==this.state.defaultAdminSearch?this.getUsersMatch(e,this.state.defaultAdminSearch.toLowerCase()):e}return[]}},{key:"getUsersAllowedToBeDefaultGroupAdmin",value:function(){if(null!==this.state.users){var e=this.state.users.filter((function(e){return!0===e.active}));return""!==this.state.defaultGroupAdminSearch?this.getUsersMatch(e,this.state.defaultGroupAdminSearch.toLowerCase()):e}return[]}},{key:"getUsersMatch",value:function(e,t){var n=t&&t.split(/\s+/)||[""],a=function(e,t){return function(e){return new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"i")}(e).test(t)},r=function(e,t){return function(e,t){return a(e,t.username)}(e,t)||function(e,t){return a(e,t.profile.first_name)||a(e,t.profile.last_name)}(e,t)};return e.filter((function(e){return n.every((function(t){return r(t,e)}))}))}},{key:"displayUser",value:function(e){return"".concat(e.profile.first_name," ").concat(e.profile.last_name," (").concat(e.username,")")}},{key:"displayDefaultAdmin",value:function(){var e=this;if(null!==this.state.users&&""!==this.state.defaultAdmin){var t=this.state.users.find((function(t){return t.id===e.state.defaultAdmin}));return this.displayUser(t)}return""}},{key:"displayDefaultGroupAdmin",value:function(){var e=this;if(null!==this.state.users&&""!==this.state.defaultGroupAdmin){var t=this.state.users.find((function(t){return t.id===e.state.defaultGroupAdmin}));return this.displayUser(t)}return""}},{key:"render",value:function(){var e=this,t=this.getUsersAllowedToBeDefaultAdmin(),n=this.getUsersAllowedToBeDefaultGroupAdmin();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ldap-settings col8"},r.a.createElement("form",{className:"form"},r.a.createElement("h3",null,r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userDirectoryToggle",onChange:this.handleInputChange,checked:this.state.userDirectoryToggle,disabled:this.hasAllInputDisabled(),id:"userDirectoryToggle"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"userDirectoryToggle"})),r.a.createElement("label",null,"Users Directory")),!this.isUserDirectoryChecked()&&r.a.createElement("p",{className:"description"},"No Users Directory is configured. Enable it to synchronise your users and groups with passbolt."),this.isUserDirectoryChecked()&&r.a.createElement("div",null,r.a.createElement("p",{className:"description"},"A Users Directory is configured. The users and groups of passbolt will synchronize with it."),r.a.createElement("div",{className:"form-content"},r.a.createElement("div",{className:"accordion section-general ".concat(this.state.openCredentials?"":"closed")},r.a.createElement("h3",{className:"accordion-header"},r.a.createElement("a",{onClick:this.handleCredentialTitleClicked},this.state.openCredentials&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openCredentials&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),"Credentials")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"radiolist required"},r.a.createElement("label",null,"Directory type"),r.a.createElement("div",{className:"input radio ad openldap form-element "},r.a.createElement("div",{className:"input radio"},r.a.createElement("input",{type:"radio",value:"ad",onChange:this.handleInputChange,name:"directoryType",checked:"ad"===this.state.directoryType,id:"directoryTypeAd",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{htmlFor:"directoryTypeAd"},"Active Directory")),r.a.createElement("div",{className:"input radio"},r.a.createElement("input",{type:"radio",value:"openldap",onChange:this.handleInputChange,name:"directoryType",checked:"openldap"===this.state.directoryType,id:"directoryTypeOpenLdap",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{htmlFor:"directoryTypeOpenLdap"},"Open Ldap")))),r.a.createElement("div",{className:"singleline connection_info protocol_host_port clearfix required ad openldap"},r.a.createElement("label",null,"Server url"),r.a.createElement("div",{className:"input text field_protocol_host ad openldap"},r.a.createElement("div",{className:"input text protocol ad openldap chosen-container chosen-container-single"},r.a.createElement("select",{id:"connection-type-input",name:"connectionType",className:"chosen-single required form-element",required:"required",value:this.state.connectionType,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()},r.a.createElement("option",{value:"plain"},"ldap://"),r.a.createElement("option",{value:"ssl"},"ldaps:// (ssl)"),r.a.createElement("option",{value:"tls"},"ldaps:// (tls)"))),r.a.createElement("div",{className:"input text host ad openldap"},r.a.createElement("input",{id:"server-input",type:"text",className:"required fluid form-element",name:"host",value:this.state.host,onChange:this.handleInputChange,onKeyUp:this.handleHostInputKeyUp,placeholder:"host",disabled:this.hasAllInputDisabled()}),this.state.hostError&&r.a.createElement("div",{id:"server-input-feedback",className:"message error"},this.state.hostError))),r.a.createElement("div",{className:"input text port ad openldap"},r.a.createElement("input",{id:"port-input",type:"text",className:"required fluid form-element",name:"port",value:this.state.port,onChange:this.handleInputChange,onKeyUp:this.handlePortInputKeyUp,placeholder:"port",disabled:this.hasAllInputDisabled()}),this.state.portError&&r.a.createElement("div",{id:"port-input-feedback",className:"message error"},this.state.portError))),r.a.createElement("div",{className:"singleline clearfix"},r.a.createElement("div",{className:"input text first-field ad openldap"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{id:"username-input",type:"text",className:"fluid form-element",name:"username",value:this.state.username,onChange:this.handleInputChange,placeholder:"username",disabled:this.hasAllInputDisabled()})),r.a.createElement("div",{className:"input text last-field ad openldap"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"password-input",className:"fluid form-element",name:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:"password",type:"password",disabled:this.hasAllInputDisabled()}))),r.a.createElement("div",{className:"input text required ad openldap"},r.a.createElement("label",null,"Domain"),r.a.createElement("input",{id:"domain-name-input",type:"text",name:"domain",value:this.state.domain,onChange:this.handleInputChange,className:"required fluid form-element",onKeyUp:this.handleDomainInputKeyUp,placeholder:"domain.ext",disabled:this.hasAllInputDisabled()}),this.state.domainError&&r.a.createElement("div",{id:"domain-name-input-feedback",className:"message error"},this.state.domainError)),r.a.createElement("div",{className:"input text ad openldap"},r.a.createElement("label",null,"Base DN"),r.a.createElement("input",{id:"base-dn-input",type:"text",name:"baseDn",value:this.state.baseDn,onChange:this.handleInputChange,className:"fluid form-element",placeholder:"OU=OrgUsers,DC=mydomain,DC=local",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"The base DN (default naming context) for the domain. If this is empty then it will be queried from the RootDSE.")))),r.a.createElement("div",{className:"accordion section-directory-configuration ".concat(this.state.openDirectoryConfiguration?"":"closed")},r.a.createElement("h3",{className:"accordion-header"},r.a.createElement("a",{onClick:this.handleDirectoryConfigurationTitleClicked},this.state.openDirectoryConfiguration&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openDirectoryConfiguration&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),"Directory configuration")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"input text ad openldap"},r.a.createElement("label",null,"Group path"),r.a.createElement("input",{id:"group-path-input",type:"text",name:"groupPath",value:this.state.groupPath,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:"Group Path",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"Group path is used in addition to the base DN while searching groups. Leave empty if users and groups are in the same DN.")),r.a.createElement("div",{className:"input text ad openldap"},r.a.createElement("label",null,"User path"),r.a.createElement("input",{id:"user-path-input",type:"text",name:"userPath",value:this.state.userPath,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:"User Path",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"User path is used in addition to base DN while searching users.")),this.isOpenLdapChecked()&&r.a.createElement("div",null,r.a.createElement("div",{className:"input text openldap"},r.a.createElement("label",null,"Group object class"),r.a.createElement("input",{id:"group-object-class-input",type:"text",name:"groupObjectClass",value:this.state.groupObjectClass,onChange:this.handleInputChange,className:"required fluid",placeholder:"GroupObjectClass",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"For Openldap only. Defines which group object to use. (Default: posixGroup)")),r.a.createElement("div",{className:"input text openldap"},r.a.createElement("label",null,"User object class"),r.a.createElement("input",{id:"user-object-class-input",type:"text",name:"userObjectClass",value:this.state.userObjectClass,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:"UserObjectClass",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"For Openldap only. Defines which user object to use. (Default: inetOrgPerson)")),r.a.createElement("div",{className:"input text openldap"},r.a.createElement("label",null,"Use email prefix / suffix?"),r.a.createElement("div",{className:"input toggle-switch openldap form-element"},r.a.createElement("label",{htmlFor:"use-email-prefix-suffix-toggle-button"},"Build email based on a prefix and suffix?"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"useEmailPrefix",value:this.state.useEmailPrefix,onChange:this.handleInputChange,id:"use-email-prefix-suffix-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"use-email-prefix-suffix-toggle-button"})),r.a.createElement("div",{className:"message"},"Use this option when user entries do not include an email address by default")),this.isUseEmailPrefixChecked()&&r.a.createElement("div",{className:"singleline clearfix",id:"use-email-prefix-suffix-options"},r.a.createElement("div",{className:"input text first-field openldap"},r.a.createElement("label",null,"Email prefix"),r.a.createElement("input",{id:"email-prefix-input",type:"text",name:"emailPrefix",checked:this.state.emailPrefix,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:"username",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"The attribute you would like to use for the first part of the email (usually username).")),r.a.createElement("div",{className:"input text last-field openldap"},r.a.createElement("label",null,"Email suffix"),r.a.createElement("input",{id:"email-suffix-input",type:"text",name:"emailSuffix",value:this.state.emailSuffix,onChange:this.handleInputChange,className:"required form-element",placeholder:"@your-domain.com",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"The domain name part of the email (@your-domain-name).")))))),r.a.createElement("div",{className:"accordion section-sync-options ".concat(this.state.openSynchronizationOptions?"":"closed")},r.a.createElement("h3",{className:"accordion-header"},r.a.createElement("a",{onClick:this.handleSynchronizationOptionsTitleClicked},this.state.openSynchronizationOptions&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),!this.state.openSynchronizationOptions&&r.a.createElement(ye.a,{name:"caret-right",baseline:!0}),"Synchronization options")),r.a.createElement("div",{className:"accordion-content"},r.a.createElement("div",{className:"input select required ad openldap"},r.a.createElement("label",null,"Default admin"),r.a.createElement("div",{onClick:this.handleDefaultAdminClicked,ref:this.defaultAdminRef},r.a.createElement("div",{className:"chosen-container chosen-container-single ".concat(this.hasAllInputDisabled()?"chosen-disabled":"chosen-container-active"," ").concat(this.state.openDefaultAdmin?"chosen-with-drop":"")},r.a.createElement("a",{className:"chosen-single"},r.a.createElement("span",{id:"default-user-select"},this.displayDefaultAdmin()),r.a.createElement("div",null,!this.state.openDefaultAdmin&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),this.state.openDefaultAdmin&&r.a.createElement(ye.a,{name:"caret-up",baseline:!0}))),r.a.createElement("div",{className:"chosen-drop"},r.a.createElement("div",{className:"chosen-search",onClick:this.stopPropagation},r.a.createElement("input",{className:"chosen-search-input",name:"defaultAdminSearch",value:this.state.defaultAdminSearch,onChange:this.handleInputChange,type:"text"}),r.a.createElement(ye.a,{name:"search"})),r.a.createElement("ul",{className:"chosen-results"},t.length>0&&t.map((function(t){return r.a.createElement("li",{key:t.id,className:"active-result",onClick:e.handleUserToBeDefaultAdminClick,"data-id":t.id},e.displayUser(t))})),0===t.length&&r.a.createElement("li",{className:"no-results",onClick:this.stopPropagation},"No results match ",r.a.createElement("span",null,this.state.defaultAdminSearch)))))),r.a.createElement("div",{className:"message"},"The default admin user is the admin user that will perform the operations for the the directory.")),r.a.createElement("div",{className:"input select required ad openldap"},r.a.createElement("label",null,"Default group admin"),r.a.createElement("div",{onClick:this.handleDefaultGroupAdminClicked,ref:this.defaultGroupAdminRef},r.a.createElement("div",{className:"chosen-container chosen-container-single ".concat(this.hasAllInputDisabled()?"chosen-disabled":"chosen-container-active"," ").concat(this.state.openDefaultGroupAdmin?"chosen-with-drop":"")},r.a.createElement("a",{className:"chosen-single"},r.a.createElement("span",{id:"default-group-admin-user-select"},this.displayDefaultGroupAdmin()),r.a.createElement("div",null,!this.state.openDefaultGroupAdmin&&r.a.createElement(ye.a,{name:"caret-down",baseline:!0}),this.state.openDefaultGroupAdmin&&r.a.createElement(ye.a,{name:"caret-up",baseline:!0}))),r.a.createElement("div",{className:"chosen-drop"},r.a.createElement("div",{className:"chosen-search",onClick:this.stopPropagation},r.a.createElement("input",{className:"chosen-search-input",name:"defaultGroupAdminSearch",value:this.state.defaultGroupAdminSearch,onChange:this.handleInputChange,type:"text"}),r.a.createElement(ye.a,{name:"search"})),r.a.createElement("ul",{className:"chosen-results"},n.length>0&&n.map((function(t){return r.a.createElement("li",{key:t.id,className:"active-result",onClick:e.handleUserToBeDefaultGroupAdminClick,"data-id":t.id},e.displayUser(t))})),0===n.length&&r.a.createElement("li",{className:"no-results",onClick:this.stopPropagation},"No results match ",r.a.createElement("span",null,this.state.defaultGroupAdminSearch)))))),r.a.createElement("div",{className:"message"},"The default group admin user is the admin user that will be the group manager of newly created group.")),r.a.createElement("div",{className:"input text ad openldap"},r.a.createElement("label",null,"Groups parent group"),r.a.createElement("input",{id:"groups-parent-group-input",type:"text",name:"groupsParentGroup",value:this.state.groupsParentGroup,onChange:this.handleInputChange,className:"fluid form-element",placeholder:"Group name",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"Synchronize only the groups which are members of this group.")),r.a.createElement("div",{className:"input text ad openldap"},r.a.createElement("label",null,"Users parent group"),r.a.createElement("input",{id:"users-parent-group-input",type:"text",name:"usersParentGroup",value:this.state.usersParentGroup,onChange:this.handleInputChange,className:"fluid form-element",placeholder:"Group name",disabled:this.hasAllInputDisabled()}),r.a.createElement("div",{className:"message"},"Synchronize only the users which are members of this group.")),this.isActiveDirectoryChecked()&&r.a.createElement("div",{className:"input text clearfix ad"},r.a.createElement("label",null,"Enabled users only"),r.a.createElement("div",{className:"input toggle-switch ad form-element"},r.a.createElement("label",{htmlFor:"enabled-users-only-toggle-button"},"Only synchronize enabled users (AD)"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"enabledUsersOnly",checked:this.state.enabledUsersOnly,onChange:this.handleInputChange,id:"enabled-users-only-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"enabled-users-only-toggle-button"}))),r.a.createElement("div",{className:"input text clearfix ad openldap"},r.a.createElement("label",null,"Sync operations"),r.a.createElement("div",{className:"col6"},r.a.createElement("div",{className:"input toggle-switch ad openldap form-element"},r.a.createElement("label",{htmlFor:"sync-users-create-toggle-button"},"Create users"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"createUsers",checked:this.state.createUsers,onChange:this.handleInputChange,id:"sync-users-create-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"sync-users-create-toggle-button"})),r.a.createElement("div",{className:"input toggle-switch ad openldap form-element"},r.a.createElement("label",{htmlFor:"sync-users-delete-toggle-button"},"Delete users"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"deleteUsers",checked:this.state.deleteUsers,onChange:this.handleInputChange,id:"sync-users-delete-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"sync-users-delete-toggle-button"}))),r.a.createElement("div",{className:"col6 last"},r.a.createElement("div",{className:"input toggle-switch ad openldap form-element"},r.a.createElement("label",{htmlFor:"sync-groups-create-toggle-button"},"Create groups"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"createGroups",checked:this.state.createGroups,onChange:this.handleInputChange,id:"sync-groups-create-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"sync-groups-create-toggle-button"})),r.a.createElement("div",{className:"input toggle-switch ad openldap form-element"},r.a.createElement("label",{htmlFor:"sync-groups-delete-toggle-button"},"Delete groups"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"deleteGroups",checked:this.state.deleteGroups,onChange:this.handleInputChange,id:"sync-groups-delete-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"sync-groups-delete-toggle-button"})),r.a.createElement("div",{className:"input toggle-switch ad openldap form-element"},r.a.createElement("label",{htmlFor:"sync-groups-update-toggle-button"},"Update groups"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"updateGroups",checked:this.state.updateGroups,onChange:this.handleInputChange,id:"sync-groups-update-toggle-button",disabled:this.hasAllInputDisabled()}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"sync-groups-update-toggle-button"})))))))))),r.a.createElement("div",{className:"col4 last"},r.a.createElement("h2",null,"Need help?"),r.a.createElement("p",null,"Check out our ldap configuration guide"),r.a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/ldap",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ye.a,{name:"life-ring"}),r.a.createElement("span",null,"Read documentation"))))}},{key:"defaultState",get:function(){return{loading:!0,processing:!1,openCredentials:!0,openDirectoryConfiguration:!1,openSynchronizationOptions:!1,openDefaultAdmin:!1,openDefaultGroupAdmin:!1,userDirectoryToggle:!1,directoryType:"ad",connectionType:"plain",host:"",hostError:null,port:"389",portError:null,username:"",password:"",domain:"",domainError:null,baseDn:"",groupPath:"",userPath:"",groupObjectClass:"",userObjectClass:"",useEmailPrefix:!1,emailPrefix:"",emailSuffix:"",defaultAdmin:"",defaultGroupAdmin:"",groupsParentGroup:"",usersParentGroup:"",enabledUsersOnly:!1,createUsers:!0,deleteUsers:!0,createGroups:!0,deleteGroups:!0,updateGroups:!0,defaultAdminSearch:"",defaultGroupAdminSearch:"",users:null,hasAlreadyBeenValidated:!1}}}]),x}(r.a.Component);mt.propTypes={context:D.a.object,administrationWorkspaceContext:D.a.object,actionFeedbackContext:D.a.any,dialogContext:D.a.any};var ft=Object(E.b)(A(z(ee(mt))));function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var yt=function(e){g()(v,e);var t,n,a,s,i,o,c,h,d,f,y=gt(v);function v(e){var t;return p()(this,v),(t=y.call(this,e)).state=t.defaultState,t.bindCallbacks(),t}return m()(v,[{key:"componentDidMount",value:(f=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.findAllEmailNotificationsSettings();case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"componentDidUpdate",value:(d=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleMustSave(t.administrationWorkspaceContext.mustSaveSettings);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"bindCallbacks",value:function(){this.handleInputChange=this.handleInputChange.bind(this)}},{key:"handleMustSave",value:(h=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.administrationWorkspaceContext.mustSaveSettings===t||!this.props.administrationWorkspaceContext.mustSaveSettings){e.next=5;break}return e.next=4,this.handleFormSubmit();case 4:this.props.administrationWorkspaceContext.onResetActionsSettings();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"findAllEmailNotificationsSettings",value:(c=u()(l.a.mark((function e(){var t,n,a,r,s,i,o,c,u,h,p,d,m,f,g,y,v,b,k,E,w,x,C,S,N;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.administrationWorkspaceContext.onGetEmailNotificationsRequested();case 2:t=e.sent,n=t.body,a=n.sources_database,r=n.sources_file,s=n.send_password_create,i=n.send_password_share,o=n.send_password_update,c=n.send_password_delete,u=n.send_folder_create,h=n.send_folder_update,p=n.send_folder_delete,d=n.send_folder_share,m=n.send_comment_add,f=n.send_group_delete,g=n.send_group_user_add,y=n.send_group_user_delete,v=n.send_group_user_update,b=n.send_group_manager_update,k=n.send_user_create,E=n.send_user_recover,w=n.show_description,x=n.show_secret,C=n.show_uri,S=n.show_username,N=n.show_comment,this.setState({loading:!1,hasDatabaseSetting:a,hasFileConfigSetting:r,passwordCreate:s,passwordShare:i,passwordUpdate:o,passwordDelete:c,folderCreate:u,folderUpdate:h,folderDelete:p,folderShare:d,commentAdd:m,groupDelete:f,groupUserAdd:g,groupUserDelete:y,groupUserUpdate:v,groupManagerUpdate:b,userCreate:k,userRecover:E,showDescription:w,showSecret:x,showUri:C,showUsername:S,showComment:N});case 28:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"handleInputChange",value:function(e){var t=e.target,n=t.checked,a=t.name;this.setState(Se()({},a,n)),this.handleEnabledSaveButton()}},{key:"handleEnabledSaveButton",value:function(){this.props.administrationWorkspaceContext.isSaveEnabled||this.props.administrationWorkspaceContext.onSaveEnabled()}},{key:"hasAllInputDisabled",value:function(){return this.state.processing||this.state.loading}},{key:"handleFormSubmit",value:(o=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.processing){e.next=14;break}return e.next=3,this.toggleProcessing();case 3:return e.prev=3,e.next=6,this.saveEmailNotifications();case 6:return e.next=8,this.handleSaveSuccess();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=14,this.handleSaveError(e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return o.apply(this,arguments)})},{key:"saveEmailNotifications",value:(i=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={sources_database:this.state.hasDatabaseSetting,sources_file:this.state.hasFileConfigSetting,send_password_create:this.state.passwordCreate,send_password_share:this.state.passwordShare,send_password_update:this.state.passwordUpdate,send_password_delete:this.state.passwordDelete,send_folder_create:this.state.folderCreate,send_folder_update:this.state.folderUpdate,send_folder_delete:this.state.folderDelete,send_folder_share:this.state.folderShare,send_comment_add:this.state.commentAdd,send_group_delete:this.state.groupDelete,send_group_user_add:this.state.groupUserAdd,send_group_user_delete:this.state.groupUserDelete,send_group_user_update:this.state.groupUserUpdate,send_group_manager_update:this.state.groupManagerUpdate,send_user_create:this.state.userCreate,send_user_recover:this.state.userRecover,show_description:this.state.showDescription,show_secret:this.state.showSecret,show_uri:this.state.showUri,show_username:this.state.showUsername,show_comment:this.state.showComment},e.next=3,this.props.administrationWorkspaceContext.onSaveEmailNotificationsRequested(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"handleSaveSuccess",value:(s=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.displaySuccess("The email notification settings were updated.");case 2:this.setState({processing:!1});case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"handleSaveError",value:(a=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("UserAbortsOperationError"!==t.name){e.next=4;break}this.setState({processing:!1}),e.next=8;break;case 4:return console.error(t),e.next=7,this.handleError(t);case 7:this.setState({processing:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleError",value:(n=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actionFeedbackContext.displayError(t.message);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"toggleProcessing",value:(t=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.processing,e.abrupt("return",this.setState({processing:!t}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"hasDatabaseSetting",value:function(){return this.state.hasDatabaseSetting}},{key:"hasFileConfigSetting",value:function(){return this.state.hasFileConfigSetting}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"email-notification-settings col8"},this.hasDatabaseSetting()&&this.hasFileConfigSetting()&&r.a.createElement("div",{className:"warning message",id:"email-notification-setting-overridden-banner"},r.a.createElement("p",null,"Settings have been found in your database as well as in your passbolt.php (or environment variables). The settings displayed in the form below are the one stored in your database and have precedence over others.")),!this.hasDatabaseSetting()&&this.hasFileConfigSetting()&&r.a.createElement("div",{className:"warning message hidden",id:"email-notification-fileconfig-exists-banner"},r.a.createElement("p",null,"You seem to have Email Notification Settings defined in your passbolt.php (or via environment variables). Submitting the form will overwrite those settings with the ones you choose in the form below.")),r.a.createElement("h3",null,"Email delivery"),r.a.createElement("p",null,"In this section you can choose which email notifications will be sent."),r.a.createElement("form",{className:"form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col6"},r.a.createElement("label",null,"Passwords"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-password-create-toggle-button"},"When a password is created, notify its creator."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordCreate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.passwordCreate,id:"send-password-create-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-password-create-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-password-update-toggle-button"},"When a password is updated, notify the users who have access to it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.passwordUpdate,id:"send-password-update-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-password-update-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-password-delete-toggle-button"},"When a password is deleted, notify the users who had access to it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.passwordDelete,id:"send-password-delete-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-password-delete-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-password-share-toggle-button"},"When a password is shared, notify the users who gain access to it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordShare",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.passwordShare,id:"send-password-share-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-password-share-toggle-button"}))),r.a.createElement("div",{className:"col6 last"},r.a.createElement("label",null,"Folders"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-folder-create-toggle-button"},"When a folder is created, notify its creator."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderCreate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.folderCreate,id:"send-folder-create-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-folder-create-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-folder-update-toggle-button"},"When a folder is updated, notify the users who have access to it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.folderUpdate,id:"send-folder-update-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-folder-update-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-folder-delete-toggle-button"},"When a folder is deleted, notify the users who had access to it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.folderDelete,id:"send-folder-delete-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-folder-delete-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-folder-share-toggle-button"},"When a folder is shared, notify the users who gain access to it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderShare",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.folderShare,id:"send-folder-share-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-folder-share-toggle-button"}))),r.a.createElement("div",{className:"row"}),r.a.createElement("div",{className:"col6 last"},r.a.createElement("label",null,"Comments"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-comment-add-toggle-button"},"When a comment is posted on a password, notify the users who have access to this password."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"commentAdd",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.commentAdd,id:"send-comment-add-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-comment-add-toggle-button"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col6"},r.a.createElement("label",null,"Group membership"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-group-delete-toggle-button"},"When a group is deleted, notify the users who were member of it."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.groupDelete,id:"send-group-delete-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-group-delete-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"group-user-add-toggle-button"},"When users are added to a group, notify them."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupUserAdd",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.groupUserAdd,id:"send-group-user-add-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-group-user-add-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-group-user-delete-toggle-button"},"When users are removed from a group, notify them."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupUserDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.groupUserDelete,id:"send-group-user-delete-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-group-user-delete-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-group-user-update-toggle-button"},"When user roles change in a group, notify the corresponding users."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupUserUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.groupUserUpdate,id:"send-group-user-update-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-group-user-update-toggle-button"}))),r.a.createElement("div",{className:"col6 last"},r.a.createElement("label",null,"Group manager"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-group-manager-update-toggle-button"},"When members of a group change, notify the group manager(s)."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupManagerUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.groupManagerUpdate,id:"send-group-manager-update-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-group-manager-update-toggle-button"})),r.a.createElement("label",null,"Registration & Recovery"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-user-create-toggle-button"},"When new users are invited to passbolt, notify them."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userCreate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.userCreate,id:"send-user-create-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-user-create-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"send-user-recover-toggle-button"},"When users try to recover their account, notify them."),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userRecover",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.userRecover,id:"send-user-recover-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"send-user-recover-toggle-button"})))),r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Email content visibility"),r.a.createElement("p",null,"In this section you can adjust the composition of the emails, e.g. which information will be included in the notification."),r.a.createElement("div",{className:"col6"},r.a.createElement("label",null,"Passwords"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"show-username-toggle-button"},"Username"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showUsername",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.showUsername,id:"show-username-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"show-username-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"show-uri-toggle-button"},"URI"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showUri",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.showUri,id:"show-uri-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"show-uri-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element ready"},r.a.createElement("label",{htmlFor:"show-secret-toggle-button"},"Encrypted secret"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showSecret",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.showSecret,id:"show-secret-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"show-secret-toggle-button"})),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"show-description-toggle-button"},"Description"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showDescription",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.showDescription,id:"show-description-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"show-description-toggle-button"}))),r.a.createElement("div",{className:"col6 last"},r.a.createElement("label",null,"Comments"),r.a.createElement("span",{className:"input toggle-switch form-element"},r.a.createElement("label",{htmlFor:"show-comment-toggle-button"},"Comment content"),r.a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showComment",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:this.state.showComment,id:"show-comment-toggle-button"}),r.a.createElement("label",{className:"toggle-switch-button",htmlFor:"show-comment-toggle-button"})))))),r.a.createElement("div",{className:"col4 last"},r.a.createElement("h3",null,"Need some help?"),r.a.createElement("p",null,"For more information about email notification, checkout the dedicated page on the help website."),r.a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/notification/email",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(ye.a,{name:"life-ring"}),r.a.createElement("span",null,"Read documentation"))))}},{key:"defaultState",get:function(){return{loading:!0,processing:!1,hasDatabaseSetting:!1,hasFileConfigSetting:!1,passwordCreate:!0,passwordShare:!0,passwordUpdate:!0,passwordDelete:!0,folderCreate:!0,folderUpdate:!0,folderDelete:!0,folderShare:!0,commentAdd:!0,groupDelete:!0,groupUserAdd:!0,groupUserDelete:!0,groupUserUpdate:!0,groupManagerUpdate:!0,userCreate:!0,userRecover:!0,showDescription:!0,showSecret:!0,showUri:!0,showUsername:!0,showComment:!0}}}]),v}(r.a.Component);yt.propTypes={administrationWorkspaceContext:D.a.object,actionFeedbackContext:D.a.any};var vt=A(ee(yt));function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var kt=function(e){g()(n,e);var t=bt(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).state=a.getDefaultState(),a.bindCallbacks(),a}return m()(n,[{key:"bindCallbacks",value:function(){this.handleChangeEvent=this.handleChangeEvent.bind(this)}},{key:"getDefaultState",value:function(){return{}}},{key:"handleChangeEvent",value:function(e){this.props.onSearch(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"col2 search-wrapper"},r.a.createElement("form",{className:"search"},r.a.createElement("div",{className:"input search required"},r.a.createElement("label",{htmlFor:"js_app_filter_keywords"},"Search"),r.a.createElement("input",{className:"required",type:"search",disabled:this.props.disabled?"disabled":"",onChange:this.handleChangeEvent,placeholder:this.props.placeholder,value:this.props.value})),r.a.createElement("button",{value:"search",type:"button",disabled:this.props.disabled?"disabled":""},r.a.createElement(ye.a,{name:"search"}),r.a.createElement("span",{className:"visuallyhidden"},"Search"))))}}]),n}(a.Component);kt.propTypes={disabled:D.a.bool,onSearch:D.a.func,placeholder:D.a.string,value:D.a.string},kt.defaultProps={disabled:!1,placeholder:"Search"};var Et=kt;function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var xt=function(e){g()(n,e);var t=wt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"isMfaSelected",value:function(){return te.MFA===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"isUserDirectorySelected",value:function(){return te.USER_DIRECTORY===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"isEmailNotificationsSelected",value:function(){return te.EMAIL_NOTIFICATION===this.props.administrationWorkspaceContext.selectedAdministration}},{key:"render",value:function(){return r.a.createElement("div",{id:"container",className:"page administration"},r.a.createElement("div",{id:"app",tabIndex:"1000"},r.a.createElement("div",{className:"header first"},r.a.createElement(he,null)),r.a.createElement("div",{className:"header second"},r.a.createElement(de,null),r.a.createElement(Et,{disabled:!0}),r.a.createElement(ke,{baseUrl:this.props.context.trustedDomain,user:this.props.context.loggedInUser})),r.a.createElement("div",{className:"header third"},r.a.createElement("div",{className:"col1 main-action-wrapper"}),r.a.createElement(et,null)),r.a.createElement("div",{className:"panel main"},r.a.createElement("div",null,r.a.createElement("div",{className:"panel left"},r.a.createElement(xe,null)),r.a.createElement("div",{className:"panel middle"},r.a.createElement(it,null),r.a.createElement("div",{className:"workspace-main"},r.a.createElement("div",{className:"grid grid-responsive-12"},this.isMfaSelected()&&r.a.createElement(Ue,null),this.isUserDirectorySelected()&&r.a.createElement(ft,null),this.isEmailNotificationsSelected()&&r.a.createElement(vt,null))))))))}}]),n}(a.Component);xt.propTypes={context:D.a.any,administrationWorkspaceContext:D.a.object};var Ct=Object(E.b)(ee(xt)),St=n(32),Nt=n(33),Dt=n(31);function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var qt=function(e){g()(n,e);var t=Rt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){var e=this,t=function(t){return e.props.location.pathname.endsWith(t)};return r.a.createElement("div",{className:"navigation first shortcuts"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{className:"row ".concat(t("profile")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.c,{to:"/app/settings/profile"},r.a.createElement("span",null,"Profile")))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row ".concat(t("theme")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.c,{to:"/app/settings/theme"},r.a.createElement("span",null,"Theme")))))),this.isMfaEnabled&&r.a.createElement("li",null,r.a.createElement("div",{className:"row ".concat(t("mfa")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.c,{to:"/app/settings/mfa"},r.a.createElement("span",null,"Multi Factor Authentication")))))),r.a.createElement("li",null,r.a.createElement("div",{className:"row ".concat(t("keys")?"selected":"")},r.a.createElement("div",{className:"main-cell-wrapper"},r.a.createElement("div",{className:"main-cell"},r.a.createElement(W.c,{to:"/app/settings/keys"},r.a.createElement("span",null,"Keys inspector"))))))))}},{key:"isMfaEnabled",get:function(){return this.context.siteSettings.canIUse("multiFactorAuthentication")}}]),n}(r.a.Component);qt.contextType=E.a,qt.propTypes={history:D.a.object,location:D.a.object};var Ut=Object(K.g)(qt),Tt=n(9),At=n.n(Tt);function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         2.13.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var _t=a.createContext({filter:{type:null,payload:null},sorter:{propertyName:"user",asc:!1},filteredUsers:[],selectedUsers:[],details:{user:null,group:null,locked:!0},scrollTo:{user:null},groupToEdit:null,onUserScrolled:function(){},onDetailsLocked:function(){},onSorterChanged:function(){},onUserSelected:{single:function(){}},onGroupToEdit:function(){}}),jt=function(e){g()(B,e);var t,n,r,s,i,o,c,h,d,f,y,v,b,k,E,w,x,C,S,N,D,R,q,U,T,A,I,_,j,z,M,O,F,P,G,L=It(B);function B(e){var t;return p()(this,B),(t=L.call(this,e)).state=t.defaultState,t.initializeProperties(),t}return m()(B,[{key:"initializeProperties",value:function(){this.users=null,this.groups=[]}},{key:"componentDidMount",value:function(){this.populate(),this.handleUsersWaitedFor()}},{key:"componentDidUpdate",value:(G=u()(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleFilterChange(n.filter);case 2:return e.next=4,this.handleUsersLoaded();case 4:return e.next=6,this.handleUsersChange();case 6:return e.next=8,this.handleGroupsChange();case 8:return e.next=10,this.handleRouteChange(t.location);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return G.apply(this,arguments)})},{key:"handleFilterChange",value:(P=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.state.filter){e.next=7;break}if(this.populate(),t.type===zt.NONE){e.next=7;break}return e.next=7,this.unselectAll();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"handleUsersChange",value:(F=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.context.users&&this.context.users!==this.users,n=null===this.users,!t){e.next=13;break}return this.users=this.context.users,e.next=6,this.search(this.state.filter);case 6:return e.next=8,this.updateDetails();case 8:return e.next=10,this.unselectUnknownUsers();case 10:if(n){e.next=13;break}return e.next=13,this.redirectAfterSelection();case 13:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"handleGroupsChange",value:(O=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.context.groups||this.context.groups===this.groups){e.next=7;break}return this.groups=this.context.groups,e.next=5,this.refreshSearchFilter();case 5:return e.next=7,this.updateDetails();case 7:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"handleRouteChange",value:(M=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.location.key!==t.key,a=this.state.filter.type===zt.NONE,!n&&!a){e.next=7;break}return e.next=5,this.handleGroupRouteChange();case 5:return e.next=7,this.handleUserRouteChange();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"handleGroupRouteChange",value:(z=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.users||null===this.groups){e.next=13;break}if(!(t=this.props.match.params.selectedGroupId)){e.next=13;break}if(!(n=this.context.groups.find((function(e){return e.id===t})))){e.next=12;break}return e.next=8,this.search({type:zt.GROUP,payload:{group:n}});case 8:return e.next=10,this.detailGroup(n);case 10:e.next=13;break;case 12:this.handleUnknownGroup();case 13:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"handleUserRouteChange",value:(j=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.location.pathname.includes("users"),n=this.props.match.params.selectedUserId,!t){e.next=10;break}if(!n){e.next=8;break}return e.next=6,this.handleSingleUserRouteChange(n);case 6:e.next=10;break;case 8:return e.next=10,this.handleAllUserRouteChange();case 10:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"handleSingleUserRouteChange",value:(_=u()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.users){e.next=17;break}if(n=this.users.find((function(e){return e.id===t})),this.state.filter.type!==zt.NONE){e.next=7;break}return e.next=7,this.search({type:zt.ALL});case 7:if(!n){e.next=16;break}return e.next=10,this.selectFromRoute(n);case 10:return e.next=12,this.scrollTo(n);case 12:return e.next=14,this.detailUser(n);case 14:e.next=17;break;case 16:this.handleUnknownUser();case 17:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"handleAllUserRouteChange",value:(I=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.users){e.next=7;break}return t=this.props.location.state&&this.props.location.state.filter||{type:zt.ALL},e.next=5,this.search(t);case 5:return e.next=7,this.detailNothing();case 7:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"handleDetailsLocked",value:(A=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lockDetails();case 2:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"handleUnknownUser",value:function(){this.props.actionFeedbackContext.displayError("The user does not exist"),this.props.history.push({pathname:"/app/users"})}},{key:"handleUnknownGroup",value:function(){this.props.actionFeedbackContext.displayError("The group does not exist"),this.props.history.push({pathname:"/app/users"})}},{key:"handleUserScrolled",value:(T=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scrollNothing();case 2:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"handleSorterChange",value:(U=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateSorter(t);case 2:return e.next=4,this.sort();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return U.apply(this,arguments)})},{key:"handleUserSelected",value:(q=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.select(t);case 2:this.redirectAfterSelection();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return q.apply(this,arguments)})},{key:"handleGroupToEdit",value:(R=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateGroupToEdit(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"handleUsersWaitedFor",value:function(){this.props.loadingContext.add()}},{key:"handleUsersLoaded",value:function(){null===this.users&&this.context.users&&(this.props.loadingContext.remove(),this.handleUsersLoaded=function(){})}},{key:"populate",value:function(){this.context.port.request("passbolt.users.update-local-storage"),this.context.port.request("passbolt.groups.update-local-storage")}},{key:"search",value:(D=u()(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.type===zt.RECENTLY_MODIFIED,n={},Se()(n,zt.GROUP,this.searchByGroup.bind(this)),Se()(n,zt.TEXT,this.searchByText.bind(this)),Se()(n,zt.RECENTLY_MODIFIED,this.searchByRecentlyModified.bind(this)),Se()(n,zt.ALL,this.searchAll.bind(this)),Se()(n,zt.NONE,(function(){})),r=n,e.next=4,r[t.type](t);case 4:if(a){e.next=9;break}return e.next=7,this.sort();case 7:e.next=11;break;case 9:return e.next=11,this.resetSorter();case 11:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"searchAll",value:(N=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filter:t,filteredUsers:this.users});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"searchByGroup",value:(S=u()(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.group,a=n.groups_users.map((function(e){return e.user_id})),r=this.users.filter((function(e){return a.some((function(t){return t===e.id}))})),e.next=5,this.setState({filter:t,filteredUsers:r});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"searchByText",value:(C=u()(l.a.mark((function e(t){var n,a,r,s,i,o,c,u,h,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,a=n&&n.split(/\s+/)||[""],r=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},s=function(e){return new RegExp(r(e),"i")},i=function(e,t){return s(e).test(t)},o=function(e,t){return i(e,t.username)},c=function(e,t){return i(e,t.profile.first_name)||i(e,t.profile.last_name)},u=function(e,t){return o(e,t)||c(e,t)},h=function(e){return a.every((function(t){return u(t,e)}))},p=this.users.filter(h),e.next=12,this.setState({filter:t,filteredUsers:p});case 12:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"searchByRecentlyModified",value:(x=u()(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e,t){return At()(t.modified).diff(At()(e.modified))},a=this.users.sort(n),e.next=4,this.setState({filter:t,filteredUsers:a});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"refreshSearchFilter",value:(w=u()(l.a.mark((function e(){var t,n,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.filter.type!==zt.GROUP){e.next=12;break}if(!this.groups.some((function(e){return e.id===r.state.filter.payload.group.id}))){e.next=10;break}return t=this.groups.find((function(e){return e.id===r.state.filter.payload.group.id})),n=Object.assign(this.state.filter,{payload:{group:t}}),e.next=8,this.search(n);case 8:e.next=12;break;case 10:a={type:zt.ALL},this.props.history.push({pathname:"/app/users",state:{filter:a}});case 12:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"select",value:(E=u()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1===this.state.selectedUsers.length&&this.state.selectedUsers[0].id===t.id,e.next=3,this.setState({selectedUsers:n?[]:[t]});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"selectFromRoute",value:(k=u()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],e.next=3,this.setState({selectedUsers:n});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"unselectAll",value:(b=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.state.selectedUsers.length){e.next=4;break}return e.next=4,this.setState({selectedUsers:[]});case 4:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"unselectUnknownUsers",value:(v=u()(l.a.mark((function e(){var t,n,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return function(t){return t.id===e.id}},n=function(e){return r.users.some(t(e))},a=this.state.selectedUsers.filter(n),e.next=5,this.setState({selectedUsers:a});case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"redirectAfterSelection",value:function(){if(null!==this.users&&null!==this.groups)if(1===this.state.selectedUsers.length)this.props.history.push("/app/users/view/".concat(this.state.selectedUsers[0].id));else{var e=this.state.filter;if(e.type===zt.GROUP)this.props.location.pathname!=="/app/groups/view/".concat(this.state.filter.payload.group.id)&&this.props.history.push({pathname:"/app/groups/view/".concat(this.state.filter.payload.group.id)});else"/app/users"!==this.props.location.pathname&&this.props.history.push({pathname:"/app/users",state:{filter:e}})}}},{key:"updateSorter",value:(y=u()(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.sorter.propertyName!==t,a=n||!this.state.sorter.asc,r={propertyName:t,asc:a},e.next=5,this.setState({sorter:r});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"resetSorter",value:(f=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={propertyName:"modified",asc:!1},this.setState({sorter:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"sort",value:(d=u()(l.a.mark((function e(){var t,n,a,r,s,i,o,c,u,h,p,d,m,f=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return function(t,n){return-e(t,n)}},n=function(e){return f.state.sorter.asc?e:t(e)},a=function(e,t){return n((function(n,a){return t(n[e],a[e])}))},r=function(e){return n(e)},s=function(e,t){return e?t?At()(e).diff(At()(t)):1:-1},i=function(e,t){return e.localeCompare(t)},o=function(e,t){return t.is_mfa_enabled===e.is_mfa_enabled?0:t.is_mfa_enabled?-1:1},c=function(e){return"".concat(e.profile.first_name," ").concat(e.profile.last_name)},u=function(e,t){return c(e).localeCompare(c(t))},h=["modified","last_logged_in"].includes(this.state.sorter.propertyName)?s:i,p="name"===this.state.sorter.propertyName,d="is_mfa_enabled"===this.state.sorter.propertyName,m=p?r(u):d?r(o):a(this.state.sorter.propertyName,h),e.next=15,this.setState({filteredUsers:this.state.filteredUsers.sort(m)});case 15:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"detailGroup",value:(h=u()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.details.locked,e.next=3,this.setState({details:{group:t,user:null,locked:n}});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"detailUser",value:(c=u()(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.details.locked,e.next=3,this.setState({details:{group:null,user:t,locked:n}});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"detailNothing",value:(o=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.details.user&&!this.state.details.group){e.next=5;break}return t=this.state.details.locked,e.next=5,this.setState({details:{group:null,user:null,locked:t}});case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"lockDetails",value:(i=u()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.details,n=this.state.details.locked,e.next=4,this.setState({details:Object.assign({},t,{locked:!n})});case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"updateDetails",value:(s=u()(l.a.mark((function e(){var t,n,a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.details.user&&!this.state.details.group){e.next=13;break}if(t=this.state.details.user,n=this.state.details.locked,!t){e.next=10;break}return a=this.users.find((function(e){return e.id===s.state.details.user.id})),e.next=8,this.setState({details:{user:a,group:null,locked:n}});case 8:e.next=13;break;case 10:return r=this.groups.find((function(e){return e.id===s.state.details.group.id})),e.next=13,this.setState({details:{group:r,user:null,locked:n}});case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"scrollTo",value:(r=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({scrollTo:{user:t}});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"scrollNothing",value:(n=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({scrollTo:{}});case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updateGroupToEdit",value:(t=u()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({groupToEdit:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return a.createElement(_t.Provider,{value:this.state},this.props.children)}},{key:"defaultState",get:function(){return{filter:{type:zt.NONE},sorter:{propertyName:"modified",asc:!1},filteredUsers:[],selectedUsers:[],details:{user:null,group:null,locked:!0},scrollTo:{user:null},groupToEdit:null,onUserScrolled:this.handleUserScrolled.bind(this),onDetailsLocked:this.handleDetailsLocked.bind(this),onSorterChanged:this.handleSorterChange.bind(this),onUserSelected:{single:this.handleUserSelected.bind(this)},onGroupToEdit:this.handleGroupToEdit.bind(this)}}}]),B}(a.Component);jt.displayName="UserWorkspaceContextProvider",jt.contextType=E.a,jt.propTypes={children:D.a.any,location:D.a.object,match:D.a.object,history:D.a.object,actionFeedbackContext:D.a.object,loadingContext:D.a.object};Object(K.g)(A(Y(jt)));var zt={NONE:"NONE",ALL:"ALL",GROUP:"FILTER-BY-GROUP",TEXT:"FILTER-BY-TEXT-SEARCH",RECENTLY_MODIFIED:"FILTER-BY-RECENTLY-MODIFIED"};function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Ot=function(e){g()(n,e);var t=Mt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return r.a.createElement(at,{items:this.breadcrumb})}},{key:"allUsers",get:function(){return[{name:"All users",link:{pathname:"/app/users",state:{filter:{type:zt.ALL}}}}]}},{key:"itemName",get:function(){var e=this,t={profile:"Profile",theme:"Theme",mfa:"Multi Factor Authentication",keys:"Keys inspector"};return t[Object.keys(t).find((function(t){return e.props.location.pathname.endsWith(t)}))]}},{key:"breadcrumb",get:function(){var e=this.context.loggedInUser;return[].concat(S()(this.allUsers),[{name:e&&"".concat(e.profile.first_name," ").concat(e.profile.last_name),link:{pathname:"/app/settings/profile"}},{name:this.itemName,link:this.props.location}])}}]),n}(a.Component);Ot.contextType=E.a,Ot.propTypes={location:D.a.object};var Ft=Object(K.g)(Ot);function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         3.0.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Gt=function(e){g()(n,e);var t=Pt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return r.a.createElement("iframe",{src:"".concat(this.props.context.trustedDomain,"/mfa/setup/select"),width:"100%",height:"100%"})}}]),n}(r.a.Component);Gt.propTypes={context:D.a.any};var Lt=Object(E.b)(Gt);function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 * @since         3.0.0
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Wt=function(e){g()(n,e);var t=Bt(n);function n(){return p()(this,n),t.apply(this,arguments)}return m()(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header second"},r.a.createElement(de,null),r.a.createElement(Et,{disabled:!0}),r.a.createElement(ke,{baseUrl:this.props.context.trustedDomain,user:this.props.context.loggedInUser})),r.a.createElement("div",{className:"header third"}),r.a.createElement("div",{className:"panel main"},r.a.createElement("div",{className:"tabs-content"},r.a.createElement("div",{className:"tab-content selected"},r.a.createElement("div",{className:"reports-workspace"},r.a.createElement("div",{className:"panel left"},r.a.createElement(Ut,null)),r.a.createElement("div",{className:"panel middle"},r.a.createElement(Ft,null),r.a.createElement(K.b,{path:"/app/settings/mfa",component:Lt})))))))}}]),n}(r.a.Component);Wt.propTypes={context:D.a.any};var Kt=Object(K.g)(Object(E.b)(Wt));function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
/**
 * Passbolt ~ Open source password manager for teams
 * Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 *
 * Licensed under GNU Affero General Public License version 3 of the or any later version.
 * For full copyright and license information, please see the LICENSE.txt
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright (c) 2020 Passbolt SA (https://www.passbolt.com)
 * @license       https://opensource.org/licenses/AGPL-3.0 AGPL License
 * @link          https://www.passbolt.com Passbolt(tm)
 */();return function(){var n,a=k()(e);if(t){var r=k()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var Vt=function(e){g()(i,e);var t,n,a,s=Ht(i);function i(e){var t;return p()(this,i),(t=s.call(this,e)).state=t.getDefaultState(e),t}return m()(i,[{key:"componentDidMount",value:(a=u()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLoggedInUser();case 2:return e.next=4,this.getSiteSettings();case 4:this.removeSplashScreen();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getDefaultState",value:function(){var e=this;return{loggedInUser:null,siteSettings:null,trustedDomain:this.baseUrl,getApiClientOptions:this.getApiClientOptions.bind(this),displayTestUserDirectoryDialogProps:{userDirectoryTestResult:null},setContext:function(t){e.setState(t)},onLogoutRequested:function(){return e.onLogoutRequested()}}}},{key:"getApiClientOptions",value:function(){return(new St.a).setBaseUrl(this.state.trustedDomain).setCsrfToken(this.getCsrfToken())}},{key:"getCsrfToken",value:function(){return document.cookie.split("; ").find((function(e){return e.startsWith("csrfToken")})).split("=")[1]}},{key:"getLoggedInUser",value:(n=u()(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getApiClientOptions().setResourceName("users"),n=new $.a(t),e.next=4,n.get("me");case 4:a=e.sent,r=a.body,this.setState({loggedInUser:r});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getSiteSettings",value:(t=u()(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getApiClientOptions().setResourceName("settings"),n=new $.a(t),e.next=4,n.findAll();case 4:return a=e.sent,e.next=7,this.setState({siteSettings:new Nt.a(a.body)});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"removeSplashScreen",value:function(){document.getElementsByTagName("html")[0].classList.remove("launching")}},{key:"onLogoutRequested",value:function(){document.location.href="".concat(this.state.trustedDomain,"/auth/logout")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.isReady&&r.a.createElement(E.a.Provider,{value:this.state},r.a.createElement(T,null,r.a.createElement(j,null,r.a.createElement(F,null,r.a.createElement(L,null),r.a.createElement(W.a,null,r.a.createElement(K.d,null,r.a.createElement(K.b,{exact:!0,path:"/app/administration"},this.isMfaEnabled&&r.a.createElement(K.a,{to:"/app/administration/mfa"}),!this.isMfaEnabled&&this.isUserDirectoryEnabled&&r.a.createElement(K.a,{to:"/app/administration/users-directory"}),!this.isMfaEnabled&&!this.isUserDirectoryEnabled&&r.a.createElement(K.a,{to:"/app/administration/email-notification"})),r.a.createElement(K.b,{path:"/app/administration"},r.a.createElement(Q,null,r.a.createElement(re,null),r.a.createElement(le,null),r.a.createElement(Ct,null))),r.a.createElement(K.b,{path:"/app/settings/mfa"},r.a.createElement(re,null),r.a.createElement(le,null),r.a.createElement("div",{id:"container",className:"page settings"},r.a.createElement("div",{id:"app",className:"app",tabIndex:"1000"},r.a.createElement("div",{className:"header first"},r.a.createElement(he,null)),r.a.createElement(Kt,null)))),r.a.createElement(K.b,{path:"/app",render:function(){window.location.reload()}}))),r.a.createElement(Dt.a,{siteSettings:this.state.siteSettings}))))))}},{key:"baseUrl",get:function(){var e=document.getElementsByTagName("base")&&document.getElementsByTagName("base")[0];return e?e.attributes.href.value.replace(/\/*$/g,""):(console.error("Unable to retrieve the page base tag"),"")}},{key:"isMfaEnabled",get:function(){var e=this.state.siteSettings;return e&&e.canIUse("multiFactorAuthentication")}},{key:"isUserDirectoryEnabled",get:function(){var e=this.state.siteSettings;return console.log(this.state.siteSettings),e&&e.canIUse("directorySync")}},{key:"isReady",get:function(){return this.state.siteSettings}}]),i}(a.Component),Yt=document.createElement("div");document.body.appendChild(Yt),i.a.render(r.a.createElement(Vt,null),Yt)}});